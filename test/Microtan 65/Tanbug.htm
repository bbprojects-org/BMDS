<html>
<head>
<style type="text/css">
<!--
.standard	{ color: black }
.hashdirective	{ color: #228B22 }
.comment	{ color: #B22222 }
.label		{ color: blue }
.error		{ color: red }
.warning	{ color: green }

.italic		{ font-style: italic }
.bold		{ font-weight: bold }
.compact	{ font-size: 8pt }

.heading	{ background-color: silver }

body		{ font-family: Verdana; font-size: 10pt }
table		{ font-family: Verdana; font-size: 10pt }

-->
</style>
</head>
<body>

<table>
<tr class=heading><td colspan=7><b>Assembler for 6502</b></td><td align=right>07/08/2005 21:07:03</td></tr><tr><td align=center class=heading>Line</td><td>&nbsp;&nbsp;&nbsp;</td><td class=heading>Hex</td><td>&nbsp;&nbsp;&nbsp;</td><td colspan=4 class=heading>Source</td></tr><tr><td colspan=8>&nbsp;</td></tr>
<tr><td align=right>0001</td><td></td><td nowrap>0000</td><td></td><td class=label>TANEX</td><td>EQU</td><td>0</td><td class=comment>// False, basic board</td></tr>
<tr><td align=right>0002</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0003</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0004</td><td></td><td></td><td></td><td colspan=4 class=comment>// MICROTAN 65 - TANBUG</td></tr>
<tr><td align=right>0005</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0006</td><td></td><td></td><td></td><td colspan=4 class=comment>// The TANBUG monitor program is located in 1K bytes of read only memory</td></tr>
<tr><td align=right>0007</td><td></td><td></td><td></td><td colspan=4 class=comment>// (ROM) at the top of the 6502 microprocessor 64K byte address space.</td></tr>
<tr><td align=right>0008</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0009</td><td></td><td></td><td></td><td colspan=4 class=comment>// TANBUG will only operate in the memory map of the microtan system, it is</td></tr>
<tr><td align=right>0010</td><td></td><td></td><td></td><td colspan=4 class=comment>// not a general purpose 6502 software and has been specifically written for</td></tr>
<tr><td align=right>0011</td><td></td><td></td><td></td><td colspan=4 class=comment>// Microtan.</td></tr>
<tr><td align=right>0012</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0013</td><td></td><td></td><td></td><td colspan=4 class=comment>// Locations F7F7, F7F8 and F7F9 are reserved for a jump to an expansion</td></tr>
<tr><td align=right>0014</td><td></td><td></td><td></td><td colspan=4 class=comment>// monitor ROM which is positioned on the expansion board.</td></tr>
<tr><td align=right>0015</td><td></td><td></td><td></td><td colspan=4 class=comment>// Locations $200 - $3FF are the visual display memory. TANBUG writes to these</td></tr>
<tr><td align=right>0016</td><td></td><td></td><td></td><td colspan=4 class=comment>// locations whenever a command is typed to the monitor.</td></tr>
<tr><td align=right>0017</td><td></td><td></td><td></td><td colspan=4 class=comment>// Locations $100 - $1FF are used as the stack by the microprocessor.</td></tr>
<tr><td align=right>0018</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0019</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0020</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0021</td><td></td><td nowrap>0000</td><td></td><td class=label></td><td>ORG</td><td>$0</td><td class=comment>// Zero system page variables</td></tr>
<tr><td align=right>0022</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0023</td><td></td><td nowrap>0000</td><td></td><td class=label>NULL:</td><td>RMB</td><td>1</td><td class=comment>// Reserved for bpt use</td></tr>
<tr><td align=right>0024</td><td></td><td nowrap>0001</td><td></td><td class=label>ICHAR:</td><td>RMB</td><td>1</td><td class=comment>// ASCII character</td></tr>
<tr><td align=right>0025</td><td></td><td nowrap>0002</td><td></td><td class=label>OCHAR:</td><td>RMB</td><td>1</td><td class=comment>// Temp char store</td></tr>
<tr><td align=right>0026</td><td></td><td nowrap>0003</td><td></td><td class=label>VDUIND:</td><td>RMB</td><td>1</td><td class=comment>// Display index</td></tr>
<tr><td align=right>0027</td><td></td><td nowrap>0004</td><td></td><td class=label>INTFS1:</td><td>RMB</td><td>3</td><td class=comment>// Fast interrupt link</td></tr>
<tr><td align=right>0028</td><td></td><td nowrap>0007</td><td></td><td class=label>NMIJP:</td><td>RMB</td><td>3</td><td class=comment>// NMI link</td></tr>
<tr><td align=right>0029</td><td></td><td nowrap>000A</td><td></td><td class=label>ICURS:</td><td>RMB</td><td>2</td><td class=comment>// Cursor index</td></tr>
<tr><td align=right>0030</td><td></td><td nowrap>000C</td><td></td><td class=label>RUNIND:</td><td>RMB</td><td>1</td><td class=comment>// Zero if in user mode</td></tr>
<tr><td align=right>0031</td><td></td><td nowrap>000D</td><td></td><td class=label>SINGLE:</td><td>RMB</td><td>1</td><td class=comment>// Nonzero if single instruction mode</td></tr>
<tr><td align=right>0032</td><td></td><td nowrap>000E</td><td></td><td class=label>PROCED:</td><td>RMB</td><td>1</td><td class=comment>// Proceed count (single instr to execute)</td></tr>
<tr><td align=right>0033</td><td></td><td nowrap>000F</td><td></td><td class=label>SIMCOM:</td><td>RMB</td><td>1</td><td class=comment>// Keypad (simple) /ASCII (complex) keyboard</td></tr>
<tr><td align=right>0034</td><td></td><td nowrap>0010</td><td></td><td class=label>INTSL1:</td><td>RMB</td><td>3</td><td class=comment>// Slow interrupt link</td></tr>
<tr><td align=right>0035</td><td></td><td nowrap>0013</td><td></td><td class=label>HXPKL:</td><td>RMB</td><td>1</td><td class=comment>// Hexpack store</td></tr>
<tr><td align=right>0036</td><td></td><td nowrap>0014</td><td></td><td class=label>HXPKH:</td><td>RMB</td><td>1</td><td class=comment></td></tr>
<tr><td align=right>0037</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0038</td><td></td><td></td><td></td><td colspan=4 class=comment>// Pseudo registers</td></tr>
<tr><td align=right>0039</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0040</td><td></td><td nowrap>0015</td><td></td><td class=label>PCLBCK:</td><td>RMB</td><td>1</td><td class=comment>// PCL</td></tr>
<tr><td align=right>0041</td><td></td><td nowrap>0016</td><td></td><td class=label>PCHBCK:</td><td>RMB</td><td>1</td><td class=comment>// PCH </td></tr>
<tr><td align=right>0042</td><td></td><td nowrap>0017</td><td></td><td class=label>PSWBCK:</td><td>RMB</td><td>1</td><td class=comment>// PSW</td></tr>
<tr><td align=right>0043</td><td></td><td nowrap>0018</td><td></td><td class=label>SPBCK:</td><td>RMB</td><td>1</td><td class=comment>// SP</td></tr>
<tr><td align=right>0044</td><td></td><td nowrap>0019</td><td></td><td class=label>XBCK:</td><td>RMB</td><td>1</td><td class=comment>// IX</td></tr>
<tr><td align=right>0045</td><td></td><td nowrap>001A</td><td></td><td class=label>YBCK:</td><td>RMB</td><td>1</td><td class=comment>// IY</td></tr>
<tr><td align=right>0046</td><td></td><td nowrap>001B</td><td></td><td class=label>ABCK:</td><td>RMB</td><td>1</td><td class=comment>// A</td></tr>
<tr><td align=right>0047</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0048</td><td></td><td></td><td></td><td colspan=4 class=comment>// Temporary stores</td></tr>
<tr><td align=right>0049</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0050</td><td></td><td nowrap>001C</td><td></td><td class=label>MODADL:</td><td>RMB</td><td>1</td><td class=comment></td></tr>
<tr><td align=right>0051</td><td></td><td nowrap>001D</td><td></td><td class=label>MODADH:</td><td>RMB</td><td>1</td><td class=comment></td></tr>
<tr><td align=right>0052</td><td></td><td nowrap>001E</td><td></td><td class=label>COPL:</td><td>RMB</td><td>1</td><td class=comment></td></tr>
<tr><td align=right>0053</td><td></td><td nowrap>001F</td><td></td><td class=label>COPH:</td><td>RMB</td><td>1</td><td class=comment></td></tr>
<tr><td align=right>0054</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0055</td><td></td><td></td><td></td><td colspan=4 class=comment>// Breakpoint status table and code store</td></tr>
<tr><td align=right>0056</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0057</td><td></td><td nowrap>0020</td><td></td><td class=label>BPTLO:</td><td>RMB</td><td>1</td><td class=comment></td></tr>
<tr><td align=right>0058</td><td></td><td nowrap>0021</td><td></td><td class=label>BPTHI:</td><td>RMB</td><td>15</td><td class=comment></td></tr>
<tr><td align=right>0059</td><td></td><td nowrap>0030</td><td></td><td class=label>BPTCOD:</td><td>RMB</td><td>16</td><td class=comment></td></tr>
<tr><td align=right>0060</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0061</td><td></td><td></td><td></td><td colspan=4 class=comment>// Stack base</td></tr>
<tr><td align=right>0062</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0063</td><td></td><td nowrap>0100</td><td></td><td class=label>STKBSE:</td><td>EQU</td><td>$100</td><td class=comment></td></tr>
<tr><td align=right>0064</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0065</td><td></td><td></td><td></td><td colspan=4 class=comment>// Display scroll labels</td></tr>
<tr><td align=right>0066</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0067</td><td></td><td nowrap>0200</td><td></td><td class=label>VDUSTT:</td><td>EQU</td><td>$200</td><td class=comment></td></tr>
<tr><td align=right>0068</td><td></td><td nowrap>0220</td><td></td><td class=label>VDUFST:</td><td>EQU</td><td>$220</td><td class=comment></td></tr>
<tr><td align=right>0069</td><td></td><td nowrap>0300</td><td></td><td class=label>VDUMID:</td><td>EQU</td><td>$300</td><td class=comment></td></tr>
<tr><td align=right>0070</td><td></td><td nowrap>0320</td><td></td><td class=label>VDUTOP:</td><td>EQU</td><td>$320</td><td class=comment></td></tr>
<tr><td align=right>0071</td><td></td><td nowrap>03E0</td><td></td><td class=label>LINBOT:</td><td>EQU</td><td>$3E0</td><td class=comment></td></tr>
<tr><td align=right>0072</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0073</td><td></td><td></td><td></td><td colspan=4 class=comment>// I/O Ports</td></tr>
<tr><td align=right>0074</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0075</td><td></td><td nowrap>BFF0</td><td></td><td class=label>SGRAPH:</td><td>EQU</td><td>$BFF0</td><td class=comment></td></tr>
<tr><td align=right>0076</td><td></td><td nowrap>BFF0</td><td></td><td class=label>KBINCL:</td><td>EQU</td><td>$BFF0</td><td class=comment>// Alternative to SGRAPH</td></tr>
<tr><td align=right>0077</td><td></td><td nowrap>BFF1</td><td></td><td class=label>SNMI:</td><td>EQU</td><td>$BFF1</td><td class=comment></td></tr>
<tr><td align=right>0078</td><td></td><td nowrap>BFF2</td><td></td><td class=label>KBWRIT:</td><td>EQU</td><td>$BFF2</td><td class=comment></td></tr>
<tr><td align=right>0079</td><td></td><td nowrap>BFF3</td><td></td><td class=label>KBREAD:</td><td>EQU</td><td>$BFF3</td><td class=comment></td></tr>
<tr><td align=right>0080</td><td></td><td nowrap>BFF3</td><td></td><td class=label>STEXT:</td><td>EQU</td><td>$BFF3</td><td class=comment>// Write to set text mode</td></tr>
<tr><td align=right>0081</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0082</td><td></td><td nowrap>F7F7</td><td></td><td class=label>INPERR:</td><td>EQU</td><td>$F7F7</td><td class=comment>// Error exit</td></tr>
<tr><td align=right>0083</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0084</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0085</td><td></td><td></td><td></td><td class=hashdirective>#if</td><td colspan=2 class=hashdirective>TANEX</td><td class=comment></td></tr>
<tr><td align=right>0086</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0087</td><td></td><td nowrap></td><td></td><td class=label></td><td>ORG</td><td>$F800</td><td class=comment></td></tr>
<tr><td align=right>0088</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0089</td><td></td><td nowrap></td><td></td><td class=label></td><td>JMP</td><td>$F951</td><td class=comment>// Jump table to utility routines</td></tr>
<tr><td align=right>0090</td><td></td><td nowrap></td><td></td><td class=label></td><td>JMP</td><td>$F9B2</td><td class=comment></td></tr>
<tr><td align=right>0091</td><td></td><td nowrap></td><td></td><td class=label></td><td>JMP</td><td>$F99B</td><td class=comment></td></tr>
<tr><td align=right>0092</td><td></td><td nowrap></td><td></td><td class=label></td><td>JMP</td><td>OPCHR1</td><td class=comment></td></tr>
<tr><td align=right>0093</td><td></td><td nowrap></td><td></td><td class=label></td><td>LDA</td><td>#13</td><td class=comment></td></tr>
<tr><td align=right>0094</td><td></td><td nowrap></td><td></td><td class=label></td><td>JMP</td><td>OPCHR</td><td class=comment></td></tr>
<tr><td align=right>0095</td><td></td><td nowrap></td><td></td><td class=label></td><td>JMP</td><td>$FAE9</td><td class=comment></td></tr>
<tr><td align=right>0096</td><td></td><td nowrap></td><td></td><td class=label></td><td>JMP</td><td>$FB0C</td><td class=comment></td></tr>
<tr><td align=right>0097</td><td></td><td nowrap></td><td></td><td class=label></td><td>JMP</td><td>HEXPCK</td><td class=comment></td></tr>
<tr><td align=right>0098</td><td></td><td nowrap></td><td></td><td class=label></td><td>JMP</td><td>HEXPNT</td><td class=comment></td></tr>
<tr><td align=right>0099</td><td></td><td nowrap></td><td></td><td class=label></td><td>JMP</td><td>POLLKB</td><td class=comment></td></tr>
<tr><td align=right>0100</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0101</td><td></td><td nowrap></td><td></td><td class=label></td><td>LDX</td><td>#$FF</td><td class=comment></td></tr>
<tr><td align=right>0102</td><td></td><td nowrap></td><td></td><td class=label></td><td>TXS</td><td></td><td class=comment></td></tr>
<tr><td align=right>0103</td><td></td><td nowrap></td><td></td><td class=label></td><td>JMP</td><td>MONTOR</td><td class=comment></td></tr>
<tr><td align=right>0104</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0105</td><td></td><td nowrap></td><td></td><td class=label></td><td>JMP</td><td>$FB16</td><td class=comment></td></tr>
<tr><td align=right>0106</td><td></td><td nowrap></td><td></td><td class=label></td><td>JMP</td><td>$FB23</td><td class=comment></td></tr>
<tr><td align=right>0107</td><td></td><td nowrap></td><td></td><td class=label></td><td>JMP</td><td>WASKB</td><td class=comment></td></tr>
<tr><td align=right>0108</td><td></td><td nowrap></td><td></td><td class=label></td><td>FDB</td><td>$FCF8</td><td class=comment></td></tr>
<tr><td align=right>0109</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0110</td><td></td><td nowrap></td><td></td><td class=label>SETUP:</td><td>JMP</td><td>KBINT</td><td class=comment></td></tr>
<tr><td align=right>0111</td><td></td><td nowrap></td><td></td><td class=label></td><td>JMP</td><td>NMNT</td><td class=comment></td></tr>
<tr><td align=right>0112</td><td></td><td nowrap></td><td></td><td class=label></td><td>FDB</td><td>LINBOT</td><td class=comment>// ICURS setting</td></tr>
<tr><td align=right>0113</td><td></td><td nowrap></td><td></td><td class=label></td><td>FCB</td><td>1</td><td class=comment>// RUNIND</td></tr>
<tr><td align=right>0114</td><td></td><td nowrap></td><td></td><td class=label></td><td>FCB</td><td>0</td><td class=comment>// SINGLE</td></tr>
<tr><td align=right>0115</td><td></td><td nowrap></td><td></td><td class=label></td><td>FCB</td><td>0</td><td class=comment>// PROCED</td></tr>
<tr><td align=right>0116</td><td></td><td nowrap></td><td></td><td class=label></td><td>FCB</td><td>0</td><td class=comment>// SIMCOM</td></tr>
<tr><td align=right>0117</td><td></td><td nowrap></td><td></td><td class=label></td><td>FCB</td><td>$40</td><td class=comment>// Slow Interrupt (RTI instruction)</td></tr>
<tr><td align=right>0118</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0119</td><td></td><td nowrap></td><td></td><td class=label></td><td>BIT</td><td>$0</td><td class=comment></td></tr>
<tr><td align=right>0120</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0121</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0122</td><td></td><td></td><td></td><td class=hashdirective>#endif</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>0123</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0124</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0125</td><td></td><td></td><td></td><td colspan=4 class=comment>// Start of ROM code for Microtan 65 TANBUG</td></tr>
<tr><td align=right>0126</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0127</td><td></td><td nowrap>FC00</td><td></td><td class=label></td><td>ORG</td><td>$FC00</td><td class=comment></td></tr>
<tr><td align=right>0128</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0129</td><td></td><td></td><td></td><td colspan=4 class=comment>// TANBUG starts here on reset</td></tr>
<tr><td align=right>0130</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0131</td><td></td><td></td><td></td><td class=hashdirective>#if</td><td colspan=2 class=hashdirective>TANEX</td><td class=comment></td></tr>
<tr><td align=right>0132</td><td></td><td nowrap></td><td></td><td class=label>START:</td><td>JMP</td><td>$F83E</td><td class=comment></td></tr>
<tr><td align=right>0133</td><td></td><td></td><td></td><td class=hashdirective>#else</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>0134</td><td></td><td nowrap>FC00 &nbsp;A2 FF</td><td></td><td class=label>START:</td><td>LDX</td><td>#$FF</td><td class=comment></td></tr>
<tr><td align=right>0135</td><td></td><td nowrap>FC02 &nbsp;9A</td><td></td><td class=label></td><td>TXS</td><td></td><td class=comment>// Set stack pointer to top of the stack</td></tr>
<tr><td align=right>0136</td><td></td><td></td><td></td><td class=hashdirective>#endif</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>0137</td><td></td><td nowrap>FC03 &nbsp;E8</td><td></td><td class=label></td><td>INX</td><td></td><td class=comment>// </td></tr>
<tr><td align=right>0138</td><td></td><td nowrap>FC04 &nbsp;86 17</td><td></td><td class=label></td><td>STX</td><td>PSWBCK</td><td class=comment>// Clear breakpoint store as their values will be</td></tr>
<tr><td align=right>0139</td><td></td><td nowrap></td><td></td><td class=label></td><td></td><td></td><td class=comment></td></tr>
<tr><td align=right>0140</td><td></td><td nowrap>FC06 &nbsp;20 B7 FF</td><td></td><td class=label></td><td>JSR</td><td>BPTCLR</td><td class=comment>// Clear breakpoints</td></tr>
<tr><td align=right>0141</td><td></td><td nowrap>FC09 &nbsp;8D F3 BF</td><td></td><td class=label></td><td>STA</td><td>STEXT</td><td class=comment>// Set text mode</td></tr>
<tr><td align=right>0142</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0143</td><td></td><td></td><td></td><td colspan=4 class=comment>// Use table in ROM to initialise parameters (note order of table must</td></tr>
<tr><td align=right>0144</td><td></td><td></td><td></td><td colspan=4 class=comment>// correspond with the order of INTFS1 to ICURSH in RAM definitions)</td></tr>
<tr><td align=right>0145</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0146</td><td></td><td></td><td></td><td class=hashdirective>#if</td><td colspan=2 class=hashdirective>TANEX</td><td class=comment></td></tr>
<tr><td align=right>0147</td><td></td><td nowrap></td><td></td><td class=label></td><td>LDX</td><td>#12</td><td class=comment></td></tr>
<tr><td align=right>0148</td><td></td><td nowrap></td><td></td><td class=label>SETUP1:</td><td>LDA</td><td>SETUP,X</td><td class=comment></td></tr>
<tr><td align=right>0149</td><td></td><td></td><td></td><td class=hashdirective>#else</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>0150</td><td></td><td nowrap>FC0C &nbsp;A2 0E</td><td></td><td class=label></td><td>LDX</td><td>#14</td><td class=comment></td></tr>
<tr><td align=right>0151</td><td></td><td nowrap>FC0E &nbsp;BD DF FF</td><td></td><td class=label>SETUP1:</td><td>LDA</td><td>SETUP,X</td><td class=comment>// SETUP holds parameter table</td></tr>
<tr><td align=right>0152</td><td></td><td></td><td></td><td class=hashdirective>#endif</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>0153</td><td></td><td nowrap>FC11 &nbsp;95 04</td><td></td><td class=label></td><td>STA</td><td>INTFS1,X</td><td class=comment>// Store in zero page RAM</td></tr>
<tr><td align=right>0154</td><td></td><td nowrap>FC13 &nbsp;CA</td><td></td><td class=label></td><td>DEX</td><td></td><td class=comment></td></tr>
<tr><td align=right>0155</td><td></td><td nowrap>FC14 &nbsp;10 F8</td><td></td><td class=label></td><td>BPL</td><td>SETUP1</td><td class=comment></td></tr>
<tr><td align=right>0156</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0157</td><td></td><td></td><td></td><td colspan=4 class=comment>// Determine keyboard type and set flag, note IX = $FF</td></tr>
<tr><td align=right>0158</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0159</td><td></td><td nowrap>FC16 &nbsp;E8</td><td></td><td class=label></td><td>INX</td><td></td><td class=comment></td></tr>
<tr><td align=right>0160</td><td></td><td nowrap>FC17 &nbsp;8E F2 BF</td><td></td><td class=label>TSFIV:</td><td>STX</td><td>KBWRIT</td><td class=comment>// Clear keyboard write latch</td></tr>
<tr><td align=right>0161</td><td></td><td nowrap>FC1A &nbsp;8D F0 BF</td><td></td><td class=label></td><td>STA</td><td>KBINCL</td><td class=comment>// Clear keyboard interrupt flag</td></tr>
<tr><td align=right>0162</td><td></td><td nowrap>FC1D &nbsp;CA</td><td></td><td class=label></td><td>DEX</td><td></td><td class=comment></td></tr>
<tr><td align=right>0163</td><td></td><td nowrap>FC1E &nbsp;8E F2 BF</td><td></td><td class=label></td><td>STX</td><td>KBWRIT</td><td class=comment>// Write to keyboard lines</td></tr>
<tr><td align=right>0164</td><td></td><td nowrap>FC21 &nbsp;E8</td><td></td><td class=label></td><td>INX</td><td></td><td class=comment>// Reset IX</td></tr>
<tr><td align=right>0165</td><td></td><td nowrap>FC22 &nbsp;AD F3 BF</td><td></td><td class=label></td><td>LDA</td><td>KBREAD</td><td class=comment>// Read it back</td></tr>
<tr><td align=right>0166</td><td></td><td nowrap>FC25 &nbsp;10 02</td><td></td><td class=label></td><td>BPL</td><td>KPCPLX</td><td class=comment>// If plus not set - alphanumeric</td></tr>
<tr><td align=right>0167</td><td></td><td nowrap>FC27 &nbsp;E6 0F</td><td></td><td class=label></td><td>INC</td><td>SIMCOM</td><td class=comment>// If set - must be keypad</td></tr>
<tr><td align=right>0168</td><td></td><td></td><td></td><td class=hashdirective>#if</td><td colspan=2 class=hashdirective>TANEX</td><td class=comment></td></tr>
<tr><td align=right>0169</td><td></td><td nowrap></td><td></td><td class=label>KPCPLX:</td><td>JSR</td><td>$FADB</td><td class=comment></td></tr>
<tr><td align=right>0170</td><td></td><td></td><td></td><td class=hashdirective>#else</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>0171</td><td></td><td nowrap>FC29 &nbsp;8D F0 BF</td><td></td><td class=label>KPCPLX:</td><td>STA</td><td>KBINCL</td><td class=comment>// Clear keyboard interrupt</td></tr>
<tr><td align=right>0172</td><td></td><td></td><td></td><td class=hashdirective>#endif</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>0173</td><td></td><td nowrap>FC2C &nbsp;BD EC FF</td><td></td><td class=label>TBMS:</td><td>LDA</td><td>HDR,X</td><td class=comment>// Display TANBUG message</td></tr>
<tr><td align=right>0174</td><td></td><td nowrap>FC2F &nbsp;F0 06</td><td></td><td class=label></td><td>BEQ</td><td>MONTOR</td><td class=comment>// Output chars until a 0</td></tr>
<tr><td align=right>0175</td><td></td><td nowrap>FC31 &nbsp;20 75 FE</td><td></td><td class=label></td><td>JSR</td><td>OPCHR</td><td class=comment></td></tr>
<tr><td align=right>0176</td><td></td><td nowrap>FC34 &nbsp;E8</td><td></td><td class=label></td><td>INX</td><td></td><td class=comment></td></tr>
<tr><td align=right>0177</td><td></td><td nowrap>FC35 &nbsp;D0 F5</td><td></td><td class=label></td><td>BNE</td><td>TBMS</td><td class=comment></td></tr>
<tr><td align=right>0178</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0179</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0180</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0181</td><td></td><td></td><td></td><td colspan=4 class=comment>// MAIN LOOP - monitor user input and act accordingly</td></tr>
<tr><td align=right>0182</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0183</td><td></td><td nowrap>FC37 &nbsp;D8</td><td></td><td class=label>MONTOR:</td><td>CLD</td><td></td><td class=comment>// Set binary mode</td></tr>
<tr><td align=right>0184</td><td></td><td nowrap>FC38 &nbsp;58</td><td></td><td class=label></td><td>CLI</td><td></td><td class=comment></td></tr>
<tr><td align=right>0185</td><td></td><td nowrap>FC39 &nbsp;20 FA FD</td><td></td><td class=label></td><td>JSR</td><td>POLLKB</td><td class=comment>// Look at keyboard</td></tr>
<tr><td align=right>0186</td><td></td><td nowrap>FC3C &nbsp;A5 01</td><td></td><td class=label></td><td>LDA</td><td>ICHAR</td><td class=comment>// Get char</td></tr>
<tr><td align=right>0187</td><td></td><td nowrap>FC3E &nbsp;C9 21</td><td></td><td class=label></td><td>CMP</td><td>#$21</td><td class=comment>// Less than a space - term</td></tr>
<tr><td align=right>0188</td><td></td><td nowrap>FC40 &nbsp;30 06</td><td></td><td class=label></td><td>BMI</td><td>MONCH1</td><td class=comment>// Else output char</td></tr>
<tr><td align=right>0189</td><td></td><td nowrap>FC42 &nbsp;20 75 FE</td><td></td><td class=label>ISTERM:</td><td>JSR</td><td>OPCHR</td><td class=comment></td></tr>
<tr><td align=right>0190</td><td></td><td nowrap>FC45 &nbsp;4C 37 FC</td><td></td><td class=label></td><td>JMP</td><td>MONTOR</td><td class=comment></td></tr>
<tr><td align=right>0191</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0192</td><td></td><td nowrap>FC48 &nbsp;20 4F FC</td><td></td><td class=label>MONCH1:</td><td>JSR</td><td>MONEN2</td><td class=comment>// Call string process</td></tr>
<tr><td align=right>0193</td><td></td><td nowrap>FC4B &nbsp;A9 0D</td><td></td><td class=label>RC1:</td><td>LDA</td><td>#$0D</td><td class=comment>// Set up CR</td></tr>
<tr><td align=right>0194</td><td></td><td nowrap>FC4D &nbsp;D0 F3</td><td></td><td class=label></td><td>BNE</td><td>ISTERM</td><td class=comment>// Uncond. branch loop</td></tr>
<tr><td align=right>0195</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0196</td><td></td><td nowrap>FC4F &nbsp;A0 00</td><td></td><td class=label>MONEN2:</td><td>LDY</td><td>#0</td><td class=comment></td></tr>
<tr><td align=right>0197</td><td></td><td nowrap>FC51 &nbsp;B1 0A</td><td></td><td class=label></td><td>LDA</td><td>(ICURS),Y</td><td class=comment>// Pick up command</td></tr>
<tr><td align=right>0198</td><td></td><td nowrap>FC53 &nbsp;AA</td><td></td><td class=label></td><td>TAX</td><td></td><td class=comment></td></tr>
<tr><td align=right>0199</td><td></td><td nowrap>FC54 &nbsp;C8</td><td></td><td class=label></td><td>INY</td><td></td><td class=comment></td></tr>
<tr><td align=right>0200</td><td></td><td nowrap>FC55 &nbsp;B1 0A</td><td></td><td class=label></td><td>LDA</td><td>(ICURS),Y</td><td class=comment>// Peek at next char</td></tr>
<tr><td align=right>0201</td><td></td><td nowrap>FC57 &nbsp;10 36</td><td></td><td class=label></td><td>BPL</td><td>MULTI</td><td class=comment>// If not -ve (cursor) must be parameter</td></tr>
<tr><td align=right>0202</td><td></td><td nowrap>FC59 &nbsp;A9 00</td><td></td><td class=label></td><td>LDA</td><td>#0</td><td class=comment>// Else set A to zero</td></tr>
<tr><td align=right>0203</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0204</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0205</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0206</td><td></td><td></td><td></td><td colspan=4 class=comment>// S - SINGLE INSTRUCTION MODE COMMAND</td></tr>
<tr><td align=right>0207</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0208</td><td></td><td></td><td></td><td colspan=4 class=comment>// This command switches single instruction mode ON.</td></tr>
<tr><td align=right>0209</td><td></td><td></td><td></td><td colspan=4 class=comment>// Single instruction mode is a very powerful debugging aid. When set</td></tr>
<tr><td align=right>0210</td><td></td><td></td><td></td><td colspan=4 class=comment>// TANBUG executes the user program one instruction at a time, re-entering</td></tr>
<tr><td align=right>0211</td><td></td><td></td><td></td><td colspan=4 class=comment>// the monitor between each instruction and printing out the status of all</td></tr>
<tr><td align=right>0212</td><td></td><td></td><td></td><td colspan=4 class=comment>// of the microprocessor's internal registers as they were after the last</td></tr>
<tr><td align=right>0213</td><td></td><td></td><td></td><td colspan=4 class=comment>// instruction executed in the user program.</td></tr>
<tr><td align=right>0214</td><td></td><td></td><td></td><td colspan=4 class=comment>// The S command is used in conjunction with the proceed command P and the</td></tr>
<tr><td align=right>0215</td><td></td><td></td><td></td><td colspan=4 class=comment>// normal mode command N.</td></tr>
<tr><td align=right>0216</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0217</td><td></td><td nowrap>FC5B &nbsp;E0 53</td><td></td><td class=label>TRYS:</td><td>CPX</td><td>#$53</td><td class=comment>// Was it S?</td></tr>
<tr><td align=right>0218</td><td></td><td nowrap>FC5D &nbsp;D0 03</td><td></td><td class=label></td><td>BNE</td><td>TRYN</td><td class=comment></td></tr>
<tr><td align=right>0219</td><td></td><td nowrap>FC5F &nbsp;86 0D</td><td></td><td class=label></td><td>STX</td><td>SINGLE</td><td class=comment>// Yes - set single step mode</td></tr>
<tr><td align=right>0220</td><td></td><td nowrap>FC61 &nbsp;60</td><td></td><td class=label></td><td>RTS</td><td></td><td class=comment></td></tr>
<tr><td align=right>0221</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0222</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0223</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0224</td><td></td><td></td><td></td><td colspan=4 class=comment>// N - NORMAL MODE COMMAND</td></tr>
<tr><td align=right>0225</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0226</td><td></td><td></td><td></td><td colspan=4 class=comment>// The N command is the complement of the S command and is used to cancel</td></tr>
<tr><td align=right>0227</td><td></td><td></td><td></td><td colspan=4 class=comment>// the S command so that the microprocessor executes the user program in</td></tr>
<tr><td align=right>0228</td><td></td><td></td><td></td><td colspan=4 class=comment>// the normal manner without returning to the monitor between each instruction.</td></tr>
<tr><td align=right>0229</td><td></td><td></td><td></td><td colspan=4 class=comment>// Reset automatically sets the normal mode of operation.</td></tr>
<tr><td align=right>0230</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0231</td><td></td><td nowrap>FC62 &nbsp;E0 4E</td><td></td><td class=label>TRYN:</td><td>CPX</td><td>#$4E</td><td class=comment>// Command N?</td></tr>
<tr><td align=right>0232</td><td></td><td nowrap>FC64 &nbsp;D0 03</td><td></td><td class=label></td><td>BNE</td><td>TRYP</td><td class=comment></td></tr>
<tr><td align=right>0233</td><td></td><td nowrap>FC66 &nbsp;85 0D</td><td></td><td class=label></td><td>STA</td><td>SINGLE</td><td class=comment>// else clear single instruction mode (ACC=0)</td></tr>
<tr><td align=right>0234</td><td></td><td nowrap>FC68 &nbsp;60</td><td></td><td class=label></td><td>RTS</td><td></td><td class=comment></td></tr>
<tr><td align=right>0235</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0236</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0237</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0238</td><td></td><td></td><td></td><td colspan=4 class=comment>// P - PROCEED COMMAND (with no argument)</td></tr>
<tr><td align=right>0239</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0240</td><td></td><td></td><td></td><td colspan=4 class=comment>// This command is used to execute the next instruction when in single</td></tr>
<tr><td align=right>0241</td><td></td><td></td><td></td><td colspan=4 class=comment>// instruction mode (after the program has been started with a G command).</td></tr>
<tr><td align=right>0242</td><td></td><td></td><td></td><td colspan=4 class=comment>// The pseudo registers are reloaded and the next instruction executed.</td></tr>
<tr><td align=right>0243</td><td></td><td></td><td></td><td colspan=4 class=comment>// After execution, the microprocessor status is displayed as follows:</td></tr>
<tr><td align=right>0244</td><td></td><td></td><td></td><td colspan=4 class=comment>//	ADDR PSW SP IX IY ACC</td></tr>
<tr><td align=right>0245</td><td></td><td></td><td></td><td colspan=4 class=comment>// With no parameters entered, only the next instruction is executed</td></tr>
<tr><td align=right>0246</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0247</td><td></td><td nowrap>FC69 &nbsp;E0 50</td><td></td><td class=label>TRYP:</td><td>CPX</td><td>#$50</td><td class=comment>// Command P with no arg?</td></tr>
<tr><td align=right>0248</td><td></td><td nowrap>FC6B &nbsp;D0 04</td><td></td><td class=label></td><td>BNE</td><td>TRYR</td><td class=comment></td></tr>
<tr><td align=right>0249</td><td></td><td nowrap>FC6D &nbsp;85 0E</td><td></td><td class=label></td><td>STA</td><td>PROCED</td><td class=comment>// Clear P count (A=0)</td></tr>
<tr><td align=right>0250</td><td></td><td nowrap>FC6F &nbsp;F0 56</td><td></td><td class=label></td><td>BEQ</td><td>PROC1</td><td class=comment>// Uncond. branch proc</td></tr>
<tr><td align=right>0251</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0252</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0253</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0254</td><td></td><td></td><td></td><td colspan=4 class=comment>// R - REGISTER MODIFY / EXAMINE COMMAND</td></tr>
<tr><td align=right>0255</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0256</td><td></td><td></td><td></td><td colspan=4 class=comment>// This command is used to view / set the pseudo registers prior to running</td></tr>
<tr><td align=right>0257</td><td></td><td></td><td></td><td colspan=4 class=comment>// a program with the G command. It effectively executes a M15 command</td></tr>
<tr><td align=right>0258</td><td></td><td></td><td></td><td colspan=4 class=comment>// to examine the pseudo registers in locations $15 to $1B</td></tr>
<tr><td align=right>0259</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0260</td><td></td><td nowrap>FC71 &nbsp;E0 52</td><td></td><td class=label>TRYR:</td><td>CPX</td><td>#$52</td><td class=comment>// Command R?</td></tr>
<tr><td align=right>0261</td><td></td><td nowrap>FC73 &nbsp;D0 09</td><td></td><td class=label></td><td>BNE</td><td>TRYB</td><td class=comment></td></tr>
<tr><td align=right>0262</td><td></td><td nowrap>FC75 &nbsp;85 1D</td><td></td><td class=label></td><td>STA</td><td>MODADH</td><td class=comment>// Note A=0</td></tr>
<tr><td align=right>0263</td><td></td><td nowrap>FC77 &nbsp;A9 15</td><td></td><td class=label></td><td>LDA</td><td>#$15</td><td class=comment>// Set pseudo reg</td></tr>
<tr><td align=right>0264</td><td></td><td nowrap>FC79 &nbsp;85 1C</td><td></td><td class=label></td><td>STA</td><td>MODADL</td><td class=comment></td></tr>
<tr><td align=right>0265</td><td></td><td nowrap>FC7B &nbsp;4C E5 FD</td><td></td><td class=label></td><td>JMP</td><td>REOPEN</td><td class=comment>// Jump mod memory</td></tr>
<tr><td align=right>0266</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0267</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0268</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0269</td><td></td><td></td><td></td><td colspan=4 class=comment>// B - BREAKPOINT COMMAND (no parameters)</td></tr>
<tr><td align=right>0270</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0271</td><td></td><td></td><td></td><td colspan=4 class=comment>// A breakpoint is a complementary debugging aid to single instruction mode.</td></tr>
<tr><td align=right>0272</td><td></td><td></td><td></td><td colspan=4 class=comment>// Instead of stepping singly through all instructions in a program, the</td></tr>
<tr><td align=right>0273</td><td></td><td></td><td></td><td colspan=4 class=comment>// breakpoint facility allows the user to specify the address at which he</td></tr>
<tr><td align=right>0274</td><td></td><td></td><td></td><td colspan=4 class=comment>// requires the monitor to be re-entered from his/her program. A breakpoint</td></tr>
<tr><td align=right>0275</td><td></td><td></td><td></td><td colspan=4 class=comment>// can be set just previous to where the fault is suspected to exist and the</td></tr>
<tr><td align=right>0276</td><td></td><td></td><td></td><td colspan=4 class=comment>// program started with the G command. Normal execution occurs until the</td></tr>
<tr><td align=right>0277</td><td></td><td></td><td></td><td colspan=4 class=comment>// breakpoint is reached, then the monitor is re-entered with the same status</td></tr>
<tr><td align=right>0278</td><td></td><td></td><td></td><td colspan=4 class=comment>// print-out as for single instruction mode. Any monitor commands can then be</td></tr>
<tr><td align=right>0279</td><td></td><td></td><td></td><td colspan=4 class=comment>// used and the program continued.</td></tr>
<tr><td align=right>0280</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0281</td><td></td><td></td><td></td><td colspan=4 class=comment>// With no parameters, the B command removes all breakpoints</td></tr>
<tr><td align=right>0282</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0283</td><td></td><td nowrap>FC7E &nbsp;E0 42</td><td></td><td class=label>TRYB:</td><td>CPX</td><td>#$42</td><td class=comment>// Command B?</td></tr>
<tr><td align=right>0284</td><td></td><td nowrap>FC80 &nbsp;D0 04</td><td></td><td class=label></td><td>BNE</td><td>ERRQ</td><td class=comment>// No - then error</td></tr>
<tr><td align=right>0285</td><td></td><td nowrap>FC82 &nbsp;20 B7 FF</td><td></td><td class=label></td><td>JSR</td><td>BPTCLR</td><td class=comment>// Else clear breakpoints</td></tr>
<tr><td align=right>0286</td><td></td><td nowrap>FC85 &nbsp;60</td><td></td><td class=label></td><td>RTS</td><td></td><td class=comment></td></tr>
<tr><td align=right>0287</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0288</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0289</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0290</td><td></td><td></td><td></td><td colspan=4 class=comment>// With no TANEX FFF7 will respond to F7F7</td></tr>
<tr><td align=right>0291</td><td></td><td></td><td></td><td colspan=4 class=comment>// With TANEX, this monitor can be expanded since FFF7 jumps back to here</td></tr>
<tr><td align=right>0292</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0293</td><td></td><td></td><td></td><td class=hashdirective>#if</td><td colspan=2 class=hashdirective>TANEX</td><td class=comment></td></tr>
<tr><td align=right>0294</td><td></td><td nowrap></td><td></td><td class=label>ERRQ:</td><td>JMP</td><td>$FA75</td><td class=comment></td></tr>
<tr><td align=right>0295</td><td></td><td></td><td></td><td class=hashdirective>#else</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>0296</td><td></td><td nowrap>FC86 &nbsp;4C F7 F7</td><td></td><td class=label>ERRQ:</td><td>JMP</td><td>INPERR</td><td class=comment></td></tr>
<tr><td align=right>0297</td><td></td><td></td><td></td><td class=hashdirective>#endif</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>0298</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0299</td><td></td><td nowrap>FC89 &nbsp;A9 3F</td><td></td><td class=label>RETERR:</td><td>LDA</td><td>#$3F</td><td class=comment></td></tr>
<tr><td align=right>0300</td><td></td><td nowrap>FC8B &nbsp;20 75 FE</td><td></td><td class=label></td><td>JSR</td><td>OPCHR</td><td class=comment>// Display question mark</td></tr>
<tr><td align=right>0301</td><td></td><td nowrap>FC8E &nbsp;60</td><td></td><td class=label></td><td>RTS</td><td></td><td class=comment></td></tr>
<tr><td align=right>0302</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0303</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0304</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0305</td><td></td><td></td><td></td><td colspan=4 class=comment>// If we get here command expects parameters too</td></tr>
<tr><td align=right>0306</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0307</td><td></td><td nowrap>FC8F &nbsp;88</td><td></td><td class=label>MULTI:</td><td>DEY</td><td></td><td class=comment></td></tr>
<tr><td align=right>0308</td><td></td><td nowrap>FC90 &nbsp;8A</td><td></td><td class=label></td><td>TXA</td><td></td><td class=comment>// Save cmd on stack</td></tr>
<tr><td align=right>0309</td><td></td><td nowrap>FC91 &nbsp;48</td><td></td><td class=label></td><td>PHA</td><td></td><td class=comment></td></tr>
<tr><td align=right>0310</td><td></td><td nowrap>FC92 &nbsp;20 28 FF</td><td></td><td class=label></td><td>JSR</td><td>HEXPCK</td><td class=comment>// Pack its argument</td></tr>
<tr><td align=right>0311</td><td></td><td nowrap>FC95 &nbsp;D0 54</td><td></td><td class=label></td><td>BNE</td><td>MOREY</td><td class=comment>// Any more data?</td></tr>
<tr><td align=right>0312</td><td></td><td nowrap>FC97 &nbsp;68</td><td></td><td class=label></td><td>PLA</td><td></td><td class=comment>// Restore command</td></tr>
<tr><td align=right>0313</td><td></td><td nowrap>FC98 &nbsp;50 EC</td><td></td><td class=label></td><td>BVC</td><td>ERRQ</td><td class=comment>// Error if no arg</td></tr>
<tr><td align=right>0314</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0315</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0316</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0317</td><td></td><td></td><td></td><td colspan=4 class=comment>// G - GO COMMAND</td></tr>
<tr><td align=right>0318</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0319</td><td></td><td></td><td></td><td colspan=4 class=comment>// Parameter is the address of the first instruction to run</td></tr>
<tr><td align=right>0320</td><td></td><td></td><td></td><td colspan=4 class=comment>// When executed the cursor disappears, and is restored on completion</td></tr>
<tr><td align=right>0321</td><td></td><td></td><td></td><td colspan=4 class=comment>// The program counter is initialised to the parameter address, and the</td></tr>
<tr><td align=right>0322</td><td></td><td></td><td></td><td colspan=4 class=comment>// stack pointer to $1FF (top of stack). The other registers// A, X, Y, PSW</td></tr>
<tr><td align=right>0323</td><td></td><td></td><td></td><td colspan=4 class=comment>// are loaded from the pseudo registers in the zero page ($15 - $1B)</td></tr>
<tr><td align=right>0324</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0325</td><td></td><td nowrap>FC9A &nbsp;C9 47</td><td></td><td class=label></td><td>CMP</td><td>#$47</td><td class=comment>// Is it a G?</td></tr>
<tr><td align=right>0326</td><td></td><td nowrap>FC9C &nbsp;D0 21</td><td></td><td class=label></td><td>BNE</td><td>TRYPL</td><td class=comment>// No - skip</td></tr>
<tr><td align=right>0327</td><td></td><td nowrap>FC9E &nbsp;A2 00</td><td></td><td class=label></td><td>LDX</td><td>#0</td><td class=comment></td></tr>
<tr><td align=right>0328</td><td></td><td nowrap>FCA0 &nbsp;86 0E</td><td></td><td class=label></td><td>STX</td><td>PROCED</td><td class=comment>// Clear proceed count</td></tr>
<tr><td align=right>0329</td><td></td><td nowrap>FCA2 &nbsp;CA</td><td></td><td class=label></td><td>DEX</td><td></td><td class=comment>// Set IX to $FF</td></tr>
<tr><td align=right>0330</td><td></td><td nowrap>FCA3 &nbsp;9A</td><td></td><td class=label>GOEND:</td><td>TXS</td><td></td><td class=comment>// Reload it</td></tr>
<tr><td align=right>0331</td><td></td><td nowrap>FCA4 &nbsp;A5 14</td><td></td><td class=label></td><td>LDA</td><td>HXPKH</td><td class=comment>// Push PC high</td></tr>
<tr><td align=right>0332</td><td></td><td nowrap>FCA6 &nbsp;48</td><td></td><td class=label></td><td>PHA</td><td></td><td class=comment></td></tr>
<tr><td align=right>0333</td><td></td><td nowrap>FCA7 &nbsp;A5 13</td><td></td><td class=label></td><td>LDA</td><td>HXPKL</td><td class=comment>// Push PC low</td></tr>
<tr><td align=right>0334</td><td></td><td nowrap>FCA9 &nbsp;48</td><td></td><td class=label></td><td>PHA</td><td></td><td class=comment></td></tr>
<tr><td align=right>0335</td><td></td><td nowrap>FCAA &nbsp;A5 17</td><td></td><td class=label></td><td>LDA</td><td>PSWBCK</td><td class=comment></td></tr>
<tr><td align=right>0336</td><td></td><td nowrap>FCAC &nbsp;48</td><td></td><td class=label></td><td>PHA</td><td></td><td class=comment></td></tr>
<tr><td align=right>0337</td><td></td><td nowrap>FCAD &nbsp;C6 0C</td><td></td><td class=label></td><td>DEC</td><td>RUNIND</td><td class=comment>// Clear run flag</td></tr>
<tr><td align=right>0338</td><td></td><td nowrap>FCAF &nbsp;A9 20</td><td></td><td class=label></td><td>LDA</td><td>#$20</td><td class=comment></td></tr>
<tr><td align=right>0339</td><td></td><td nowrap>FCB1 &nbsp;A4 03</td><td></td><td class=label></td><td>LDY</td><td>VDUIND</td><td class=comment></td></tr>
<tr><td align=right>0340</td><td></td><td nowrap>FCB3 &nbsp;91 0A</td><td></td><td class=label></td><td>STA</td><td>(ICURS),Y</td><td class=comment>// Obliterate cursor</td></tr>
<tr><td align=right>0341</td><td></td><td nowrap>FCB5 &nbsp;A6 19</td><td></td><td class=label></td><td>LDX</td><td>XBCK</td><td class=comment></td></tr>
<tr><td align=right>0342</td><td></td><td nowrap>FCB7 &nbsp;A4 1A</td><td></td><td class=label></td><td>LDY</td><td>YBCK</td><td class=comment></td></tr>
<tr><td align=right>0343</td><td></td><td nowrap>FCB9 &nbsp;A5 1B</td><td></td><td class=label>SRET:</td><td>LDA</td><td>ABCK</td><td class=comment>// Set users Acc</td></tr>
<tr><td align=right>0344</td><td></td><td nowrap>FCBB &nbsp;8D F1 BF</td><td></td><td class=label></td><td>STA</td><td>SNMI</td><td class=comment>// Set NMI for next</td></tr>
<tr><td align=right>0345</td><td></td><td nowrap>FCBE &nbsp;40</td><td></td><td class=label></td><td>RTI</td><td></td><td class=comment>// Goto user prog</td></tr>
<tr><td align=right>0346</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0347</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0348</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0349</td><td></td><td></td><td></td><td colspan=4 class=comment>// P - PROCEED COMMAND (with argument)</td></tr>
<tr><td align=right>0350</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0351</td><td></td><td></td><td></td><td colspan=4 class=comment>// This command is used to execute the next instruction when in single</td></tr>
<tr><td align=right>0352</td><td></td><td></td><td></td><td colspan=4 class=comment>// instruction mode (after the program has been started with a G command).</td></tr>
<tr><td align=right>0353</td><td></td><td></td><td></td><td colspan=4 class=comment>// The pseudo registers are reloaded and the next instruction executed.</td></tr>
<tr><td align=right>0354</td><td></td><td></td><td></td><td colspan=4 class=comment>// After execution, the microprocessor status is displayed as follows:</td></tr>
<tr><td align=right>0355</td><td></td><td></td><td></td><td colspan=4 class=comment>//	ADDR PSW SP IX IY ACC</td></tr>
<tr><td align=right>0356</td><td></td><td></td><td></td><td colspan=4 class=comment>// If a parameter less than or equal to $FF is entered, then this number</td></tr>
<tr><td align=right>0357</td><td></td><td></td><td></td><td colspan=4 class=comment>// of instructions are executed before returning to the monitor</td></tr>
<tr><td align=right>0358</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0359</td><td></td><td nowrap>FCBF &nbsp;C9 50</td><td></td><td class=label>TRYPL:</td><td>CMP</td><td>#$50</td><td class=comment>// Command P with arg?</td></tr>
<tr><td align=right>0360</td><td></td><td nowrap>FCC1 &nbsp;D0 11</td><td></td><td class=label></td><td>BNE</td><td>TRYM</td><td class=comment></td></tr>
<tr><td align=right>0361</td><td></td><td nowrap>FCC3 &nbsp;A5 13</td><td></td><td class=label></td><td>LDA</td><td>HXPKL</td><td class=comment>// Set P count</td></tr>
<tr><td align=right>0362</td><td></td><td nowrap>FCC5 &nbsp;85 0E</td><td></td><td class=label></td><td>STA</td><td>PROCED</td><td class=comment></td></tr>
<tr><td align=right>0363</td><td></td><td nowrap>FCC7 &nbsp;A5 16</td><td></td><td class=label>PROC1:</td><td>LDA</td><td>PCHBCK</td><td class=comment>// Restore users PC</td></tr>
<tr><td align=right>0364</td><td></td><td nowrap>FCC9 &nbsp;85 14</td><td></td><td class=label>PNOARG:</td><td>STA</td><td>HXPKH</td><td class=comment></td></tr>
<tr><td align=right>0365</td><td></td><td nowrap>FCCB &nbsp;A5 15</td><td></td><td class=label></td><td>LDA</td><td>PCLBCK</td><td class=comment></td></tr>
<tr><td align=right>0366</td><td></td><td nowrap>FCCD &nbsp;85 13</td><td></td><td class=label></td><td>STA</td><td>HXPKL</td><td class=comment></td></tr>
<tr><td align=right>0367</td><td></td><td nowrap>FCCF &nbsp;A6 18</td><td></td><td class=label></td><td>LDX</td><td>SPBCK</td><td class=comment>// Set IX to users SP</td></tr>
<tr><td align=right>0368</td><td></td><td nowrap>FCD1 &nbsp;4C A3 FC</td><td></td><td class=label></td><td>JMP</td><td>GOEND</td><td class=comment>// Then back to user</td></tr>
<tr><td align=right>0369</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0370</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0371</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0372</td><td></td><td></td><td></td><td colspan=4 class=comment>// M - MODIFY/EXAMINE MEMORY COMMAND</td></tr>
<tr><td align=right>0373</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0374</td><td></td><td></td><td></td><td colspan=4 class=comment>// Parameter is the memory address to be examined / modified</td></tr>
<tr><td align=right>0375</td><td></td><td></td><td></td><td colspan=4 class=comment>// TANBUG shows memory address and location, and awaits user input:</td></tr>
<tr><td align=right>0376</td><td></td><td></td><td></td><td colspan=4 class=comment>// - any terminator, location not altered and closes command</td></tr>
<tr><td align=right>0377</td><td></td><td></td><td></td><td colspan=4 class=comment>// - value followed by terminator, modifies location with value, if terminator is</td></tr>
<tr><td align=right>0378</td><td></td><td></td><td></td><td colspan=4 class=comment>//	CR, closes command</td></tr>
<tr><td align=right>0379</td><td></td><td></td><td></td><td colspan=4 class=comment>//	SPACE, shows same location</td></tr>
<tr><td align=right>0380</td><td></td><td></td><td></td><td colspan=4 class=comment>//	LF, shows next memory location</td></tr>
<tr><td align=right>0381</td><td></td><td></td><td></td><td colspan=4 class=comment>//	ESC, shows previous memory location</td></tr>
<tr><td align=right>0382</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0383</td><td></td><td nowrap>FCD4 &nbsp;C9 4D</td><td></td><td class=label>TRYM:</td><td>CMP</td><td>#$4D</td><td class=comment>// Command M address?</td></tr>
<tr><td align=right>0384</td><td></td><td nowrap>FCD6 &nbsp;D0 AE</td><td></td><td class=label></td><td>BNE</td><td>ERRQ</td><td class=comment>// No - error</td></tr>
<tr><td align=right>0385</td><td></td><td nowrap>FCD8 &nbsp;A9 2C</td><td></td><td class=label>EQPT:</td><td>LDA</td><td>#$2C</td><td class=comment></td></tr>
<tr><td align=right>0386</td><td></td><td nowrap>FCDA &nbsp;20 75 FE</td><td></td><td class=label></td><td>JSR</td><td>OPCHR</td><td class=comment>// Output a comma</td></tr>
<tr><td align=right>0387</td><td></td><td nowrap>FCDD &nbsp;A0 00</td><td></td><td class=label></td><td>LDY</td><td>#0</td><td class=comment></td></tr>
<tr><td align=right>0388</td><td></td><td nowrap>FCDF &nbsp;B1 13</td><td></td><td class=label></td><td>LDA</td><td>(HXPKL),Y</td><td class=comment>// Pick up value</td></tr>
<tr><td align=right>0389</td><td></td><td nowrap>FCE1 &nbsp;20 0B FF</td><td></td><td class=label></td><td>JSR</td><td>HEXPNT</td><td class=comment>// and display it</td></tr>
<tr><td align=right>0390</td><td></td><td nowrap>FCE4 &nbsp;68</td><td></td><td class=label></td><td>PLA</td><td></td><td class=comment>// Pop stack return</td></tr>
<tr><td align=right>0391</td><td></td><td nowrap>FCE5 &nbsp;68</td><td></td><td class=label></td><td>PLA</td><td></td><td class=comment></td></tr>
<tr><td align=right>0392</td><td></td><td nowrap>FCE6 &nbsp;A9 2C</td><td></td><td class=label></td><td>LDA</td><td>#$2C</td><td class=comment>// Load comma</td></tr>
<tr><td align=right>0393</td><td></td><td nowrap>FCE8 &nbsp;4C 42 FC</td><td></td><td class=label></td><td>JMP</td><td>ISTERM</td><td class=comment>// and back to monitor</td></tr>
<tr><td align=right>0394</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0395</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0396</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0397</td><td></td><td></td><td></td><td colspan=4 class=comment>// If here then there is a second parameter</td></tr>
<tr><td align=right>0398</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0399</td><td></td><td nowrap>FCEB &nbsp;E0 2C</td><td></td><td class=label>MOREY:</td><td>CPX</td><td>#$2C</td><td class=comment>// Was term a comma?</td></tr>
<tr><td align=right>0400</td><td></td><td nowrap>FCED &nbsp;F0 04</td><td></td><td class=label></td><td>BEQ</td><td>GETPT2</td><td class=comment>// Yes - continue</td></tr>
<tr><td align=right>0401</td><td></td><td nowrap>FCEF &nbsp;68</td><td></td><td class=label>LINKPH:</td><td>PLA</td><td></td><td class=comment>// Else pull command</td></tr>
<tr><td align=right>0402</td><td></td><td nowrap>FCF0 &nbsp;4C 86 FC</td><td></td><td class=label>LINKR:</td><td>JMP</td><td>ERRQ</td><td class=comment>// and give error</td></tr>
<tr><td align=right>0403</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0404</td><td></td><td nowrap>FCF3 &nbsp;A5 13</td><td></td><td class=label>GETPT2:</td><td>LDA</td><td>HXPKL</td><td class=comment>// No comma - store previous</td></tr>
<tr><td align=right>0405</td><td></td><td nowrap>FCF5 &nbsp;85 1C</td><td></td><td class=label></td><td>STA</td><td>MODADL</td><td class=comment>// in MODADL & MODADH</td></tr>
<tr><td align=right>0406</td><td></td><td nowrap>FCF7 &nbsp;A5 14</td><td></td><td class=label></td><td>LDA</td><td>HXPKH</td><td class=comment></td></tr>
<tr><td align=right>0407</td><td></td><td nowrap>FCF9 &nbsp;85 1D</td><td></td><td class=label></td><td>STA</td><td>MODADH</td><td class=comment></td></tr>
<tr><td align=right>0408</td><td></td><td nowrap>FCFB &nbsp;20 28 FF</td><td></td><td class=label></td><td>JSR</td><td>HEXPCK</td><td class=comment>// Pack next value</td></tr>
<tr><td align=right>0409</td><td></td><td nowrap>FCFE &nbsp;D0 7C</td><td></td><td class=label></td><td>BNE</td><td>MOREY1</td><td class=comment>// Not cursor - more yet</td></tr>
<tr><td align=right>0410</td><td></td><td nowrap>FD00 &nbsp;68</td><td></td><td class=label></td><td>PLA</td><td></td><td class=comment>// Else pull command</td></tr>
<tr><td align=right>0411</td><td></td><td nowrap>FD01 &nbsp;50 ED</td><td></td><td class=label></td><td>BVC</td><td>LINKR</td><td class=comment>// No argument? - error</td></tr>
<tr><td align=right>0412</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0413</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0414</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0415</td><td></td><td></td><td></td><td colspan=4 class=comment>// L - LIST COMMAND (see LISTIT routine below)</td></tr>
<tr><td align=right>0416</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0417</td><td></td><td nowrap>FD03 &nbsp;C9 4C</td><td></td><td class=label></td><td>CMP</td><td>#$4C</td><td class=comment>// Command L?</td></tr>
<tr><td align=right>0418</td><td></td><td nowrap>FD05 &nbsp;F0 42</td><td></td><td class=label></td><td>BEQ</td><td>LISTIT</td><td class=comment>// Yes - list it</td></tr>
<tr><td align=right>0419</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0420</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0421</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0422</td><td></td><td></td><td></td><td colspan=4 class=comment>// O - OFFSET COMMAND</td></tr>
<tr><td align=right>0423</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0424</td><td></td><td></td><td></td><td colspan=4 class=comment>// The offset command is a program writing aid. It calculates branch offsets</td></tr>
<tr><td align=right>0425</td><td></td><td></td><td></td><td colspan=4 class=comment>// for the user for incorporation as arguments in branch instructions.</td></tr>
<tr><td align=right>0426</td><td></td><td></td><td></td><td colspan=4 class=comment>// Parameters are the address of the branch opcode, and the address of the</td></tr>
<tr><td align=right>0427</td><td></td><td></td><td></td><td colspan=4 class=comment>// destination. The result is the value to be used as the argument for the</td></tr>
<tr><td align=right>0428</td><td></td><td></td><td></td><td colspan=4 class=comment>// branch.</td></tr>
<tr><td align=right>0429</td><td></td><td></td><td></td><td colspan=4 class=comment>// Note that the maximum branch is $7F forwards, or backwards</td></tr>
<tr><td align=right>0430</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0431</td><td></td><td nowrap>FD07 &nbsp;C9 4F</td><td></td><td class=label></td><td>CMP</td><td>#$4F</td><td class=comment>// Command O?</td></tr>
<tr><td align=right>0432</td><td></td><td nowrap>FD09 &nbsp;D0 27</td><td></td><td class=label></td><td>BNE</td><td>TRYBPT</td><td class=comment></td></tr>
<tr><td align=right>0433</td><td></td><td nowrap>FD0B &nbsp;A5 13</td><td></td><td class=label></td><td>LDA</td><td>HXPKL</td><td class=comment>// Get branch dest</td></tr>
<tr><td align=right>0434</td><td></td><td nowrap>FD0D &nbsp;38</td><td></td><td class=label></td><td>SEC</td><td></td><td class=comment></td></tr>
<tr><td align=right>0435</td><td></td><td nowrap>FD0E &nbsp;E9 02</td><td></td><td class=label></td><td>SBC</td><td>#2</td><td class=comment>// Adjust for branch code</td></tr>
<tr><td align=right>0436</td><td></td><td nowrap>FD10 &nbsp;B0 02</td><td></td><td class=label></td><td>BCS</td><td>NOTOPO</td><td class=comment></td></tr>
<tr><td align=right>0437</td><td></td><td nowrap>FD12 &nbsp;C6 14</td><td></td><td class=label></td><td>DEC</td><td>HXPKH</td><td class=comment></td></tr>
<tr><td align=right>0438</td><td></td><td nowrap>FD14 &nbsp;38</td><td></td><td class=label>NOTOPO:</td><td>SEC</td><td></td><td class=comment></td></tr>
<tr><td align=right>0439</td><td></td><td nowrap>FD15 &nbsp;E5 1C</td><td></td><td class=label></td><td>SBC</td><td>MODADL</td><td class=comment>// Subtract source</td></tr>
<tr><td align=right>0440</td><td></td><td nowrap>FD17 &nbsp;AA</td><td></td><td class=label></td><td>TAX</td><td></td><td class=comment>// Hold result in IX</td></tr>
<tr><td align=right>0441</td><td></td><td nowrap>FD18 &nbsp;A5 14</td><td></td><td class=label></td><td>LDA</td><td>HXPKH</td><td class=comment>// Subtract high byte</td></tr>
<tr><td align=right>0442</td><td></td><td nowrap>FD1A &nbsp;E5 1D</td><td></td><td class=label></td><td>SBC</td><td>MODADH</td><td class=comment></td></tr>
<tr><td align=right>0443</td><td></td><td nowrap>FD1C &nbsp;A8</td><td></td><td class=label></td><td>TAY</td><td></td><td class=comment>// Store in IY</td></tr>
<tr><td align=right>0444</td><td></td><td nowrap>FD1D &nbsp;8A</td><td></td><td class=label></td><td>TXA</td><td></td><td class=comment>// Get low byte</td></tr>
<tr><td align=right>0445</td><td></td><td nowrap>FD1E &nbsp;30 05</td><td></td><td class=label></td><td>BMI</td><td>RNGNG</td><td class=comment>// If -ve branch</td></tr>
<tr><td align=right>0446</td><td></td><td nowrap>FD20 &nbsp;98</td><td></td><td class=label></td><td>TYA</td><td></td><td class=comment>// If +ve look at high</td></tr>
<tr><td align=right>0447</td><td></td><td nowrap>FD21 &nbsp;D0 CD</td><td></td><td class=label></td><td>BNE</td><td>LINKR</td><td class=comment>// Not 0 - then error</td></tr>
<tr><td align=right>0448</td><td></td><td nowrap>FD23 &nbsp;F0 03</td><td></td><td class=label></td><td>BEQ</td><td>PNTITO</td><td class=comment>// If ok continue</td></tr>
<tr><td align=right>0449</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0450</td><td></td><td nowrap>FD25 &nbsp;C8</td><td></td><td class=label>RNGNG:</td><td>INY</td><td></td><td class=comment>// If -ve, then high is $FF</td></tr>
<tr><td align=right>0451</td><td></td><td nowrap>FD26 &nbsp;D0 C8</td><td></td><td class=label></td><td>BNE</td><td>LINKR</td><td class=comment></td></tr>
<tr><td align=right>0452</td><td></td><td nowrap>FD28 &nbsp;A9 3D</td><td></td><td class=label>PNTITO:</td><td>LDA</td><td>#$3D</td><td class=comment></td></tr>
<tr><td align=right>0453</td><td></td><td nowrap>FD2A &nbsp;20 75 FE</td><td></td><td class=label></td><td>JSR</td><td>OPCHR</td><td class=comment>// Ok - display equals sign</td></tr>
<tr><td align=right>0454</td><td></td><td nowrap>FD2D &nbsp;8A</td><td></td><td class=label></td><td>TXA</td><td></td><td class=comment></td></tr>
<tr><td align=right>0455</td><td></td><td nowrap>FD2E &nbsp;20 0B FF</td><td></td><td class=label></td><td>JSR</td><td>HEXPNT</td><td class=comment>// ... and the value</td></tr>
<tr><td align=right>0456</td><td></td><td nowrap>FD31 &nbsp;60</td><td></td><td class=label></td><td>RTS</td><td></td><td class=comment></td></tr>
<tr><td align=right>0457</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0458</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0459</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0460</td><td></td><td></td><td></td><td colspan=4 class=comment>// B - BREAKPOINT COMMAND (with parameters)</td></tr>
<tr><td align=right>0461</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0462</td><td></td><td></td><td></td><td colspan=4 class=comment>// As described above.</td></tr>
<tr><td align=right>0463</td><td></td><td></td><td></td><td colspan=4 class=comment>// Parameters are the address of any opcode instruction, and the number of the</td></tr>
<tr><td align=right>0464</td><td></td><td></td><td></td><td colspan=4 class=comment>// breakpoint to be set (0 to 7)</td></tr>
<tr><td align=right>0465</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0466</td><td></td><td nowrap>FD32 &nbsp;C9 42</td><td></td><td class=label>TRYBPT:</td><td>CMP</td><td>#$42</td><td class=comment>// Command B?</td></tr>
<tr><td align=right>0467</td><td></td><td nowrap>FD34 &nbsp;D0 BA</td><td></td><td class=label>LINK1:</td><td>BNE</td><td>LINKR</td><td class=comment>// No - error</td></tr>
<tr><td align=right>0468</td><td></td><td nowrap>FD36 &nbsp;A5 13</td><td></td><td class=label></td><td>LDA</td><td>HXPKL</td><td class=comment>// Maximum breakpoint code is 7</td></tr>
<tr><td align=right>0469</td><td></td><td nowrap>FD38 &nbsp;30 B6</td><td></td><td class=label></td><td>BMI</td><td>LINKR</td><td class=comment></td></tr>
<tr><td align=right>0470</td><td></td><td nowrap>FD3A &nbsp;C9 08</td><td></td><td class=label></td><td>CMP</td><td>#8</td><td class=comment>// If greater - then error</td></tr>
<tr><td align=right>0471</td><td></td><td nowrap>FD3C &nbsp;10 B2</td><td></td><td class=label></td><td>BPL</td><td>LINKR</td><td class=comment></td></tr>
<tr><td align=right>0472</td><td></td><td nowrap>FD3E &nbsp;0A</td><td></td><td class=label></td><td>ASL</td><td>A</td><td class=comment>// Double A</td></tr>
<tr><td align=right>0473</td><td></td><td nowrap>FD3F &nbsp;AA</td><td></td><td class=label></td><td>TAX</td><td></td><td class=comment>// Set IX for indexed addressing</td></tr>
<tr><td align=right>0474</td><td></td><td nowrap>FD40 &nbsp;A5 1C</td><td></td><td class=label></td><td>LDA</td><td>MODADL</td><td class=comment>// Store breakpoint address</td></tr>
<tr><td align=right>0475</td><td></td><td nowrap>FD42 &nbsp;95 20</td><td></td><td class=label></td><td>STA</td><td>BPTLO,X</td><td class=comment></td></tr>
<tr><td align=right>0476</td><td></td><td nowrap>FD44 &nbsp;A5 1D</td><td></td><td class=label></td><td>LDA</td><td>MODADH</td><td class=comment></td></tr>
<tr><td align=right>0477</td><td></td><td nowrap>FD46 &nbsp;95 21</td><td></td><td class=label></td><td>STA</td><td>BPTHI,X</td><td class=comment></td></tr>
<tr><td align=right>0478</td><td></td><td nowrap>FD48 &nbsp;60</td><td></td><td class=label>JPRTRN:</td><td>RTS</td><td></td><td class=comment></td></tr>
<tr><td align=right>0479</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0480</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0481</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0482</td><td></td><td></td><td></td><td colspan=4 class=comment>// L - LIST MEMORY COMMAND</td></tr>
<tr><td align=right>0483</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0484</td><td></td><td></td><td></td><td colspan=4 class=comment>// Parameters are start memory address, and number of lines of 8 consecutive</td></tr>
<tr><td align=right>0485</td><td></td><td></td><td></td><td colspan=4 class=comment>// memory locations to show</td></tr>
<tr><td align=right>0486</td><td></td><td></td><td></td><td colspan=4 class=comment>// If 0 lines are requested, 256 lines will be shown</td></tr>
<tr><td align=right>0487</td><td></td><td></td><td></td><td colspan=4 class=comment>// TANBUG pauses between each line to permit the user to read the output</td></tr>
<tr><td align=right>0488</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0489</td><td></td><td nowrap>FD49 &nbsp;20 73 FE</td><td></td><td class=label>LISTIT:</td><td>JSR</td><td>OUTPCR</td><td class=comment>// Output carriage return</td></tr>
<tr><td align=right>0490</td><td></td><td nowrap>FD4C &nbsp;A0 00</td><td></td><td class=label>NXLI:</td><td>LDY</td><td>#0</td><td class=comment></td></tr>
<tr><td align=right>0491</td><td></td><td nowrap>FD4E &nbsp;A5 1D</td><td></td><td class=label></td><td>LDA</td><td>MODADH</td><td class=comment>// Display address</td></tr>
<tr><td align=right>0492</td><td></td><td nowrap>FD50 &nbsp;20 0B FF</td><td></td><td class=label></td><td>JSR</td><td>HEXPNT</td><td class=comment>// High byte ...</td></tr>
<tr><td align=right>0493</td><td></td><td nowrap>FD53 &nbsp;A5 1C</td><td></td><td class=label></td><td>LDA</td><td>MODADL</td><td class=comment></td></tr>
<tr><td align=right>0494</td><td></td><td nowrap>FD55 &nbsp;20 0B FF</td><td></td><td class=label>NXLIST:</td><td>JSR</td><td>HEXPNT</td><td class=comment>// Output low byte</td></tr>
<tr><td align=right>0495</td><td></td><td nowrap>FD58 &nbsp;A9 20</td><td></td><td class=label></td><td>LDA</td><td>#$20</td><td class=comment></td></tr>
<tr><td align=right>0496</td><td></td><td nowrap>FD5A &nbsp;20 75 FE</td><td></td><td class=label></td><td>JSR</td><td>OPCHR</td><td class=comment>// Output a space</td></tr>
<tr><td align=right>0497</td><td></td><td nowrap>FD5D &nbsp;B1 1C</td><td></td><td class=label></td><td>LDA</td><td>(MODADL),Y</td><td class=comment>// Display memory locations</td></tr>
<tr><td align=right>0498</td><td></td><td nowrap>FD5F &nbsp;C8</td><td></td><td class=label></td><td>INY</td><td></td><td class=comment></td></tr>
<tr><td align=right>0499</td><td></td><td nowrap>FD60 &nbsp;C0 09</td><td></td><td class=label></td><td>CPY</td><td>#9</td><td class=comment>// For eight memory locations</td></tr>
<tr><td align=right>0500</td><td></td><td nowrap>FD62 &nbsp;30 F1</td><td></td><td class=label></td><td>BMI</td><td>NXLIST</td><td class=comment></td></tr>
<tr><td align=right>0501</td><td></td><td nowrap>FD64 &nbsp;C6 13</td><td></td><td class=label></td><td>DEC</td><td>HXPKL</td><td class=comment>// Decrement line count</td></tr>
<tr><td align=right>0502</td><td></td><td nowrap>FD66 &nbsp;F0 E0</td><td></td><td class=label></td><td>BEQ</td><td>JPRTRN</td><td class=comment>// O? Return via CR (note requesting 0 lines gives 256)</td></tr>
<tr><td align=right>0503</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0504</td><td></td><td></td><td></td><td class=hashdirective>#if</td><td colspan=2 class=hashdirective>TANEX</td><td class=comment></td></tr>
<tr><td align=right>0505</td><td></td><td nowrap></td><td></td><td class=label>DELX1:</td><td>NOP</td><td></td><td class=comment></td></tr>
<tr><td align=right>0506</td><td></td><td nowrap></td><td></td><td class=label></td><td>NOP</td><td></td><td class=comment></td></tr>
<tr><td align=right>0507</td><td></td><td nowrap></td><td></td><td class=label></td><td>NOP</td><td></td><td class=comment></td></tr>
<tr><td align=right>0508</td><td></td><td nowrap></td><td></td><td class=label></td><td>NOP</td><td></td><td class=comment></td></tr>
<tr><td align=right>0509</td><td></td><td nowrap></td><td></td><td class=label></td><td>NOP</td><td></td><td class=comment></td></tr>
<tr><td align=right>0510</td><td></td><td nowrap></td><td></td><td class=label></td><td>NOP</td><td></td><td class=comment></td></tr>
<tr><td align=right>0511</td><td></td><td></td><td></td><td class=hashdirective>#else</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>0512</td><td></td><td nowrap>FD68 &nbsp;88</td><td></td><td class=label>DELX1:</td><td>DEY</td><td></td><td class=comment>// Time delay</td></tr>
<tr><td align=right>0513</td><td></td><td nowrap>FD69 &nbsp;D0 FD</td><td></td><td class=label></td><td>BNE</td><td>DELX1</td><td class=comment></td></tr>
<tr><td align=right>0514</td><td></td><td nowrap>FD6B &nbsp;CA</td><td></td><td class=label></td><td>DEX</td><td></td><td class=comment></td></tr>
<tr><td align=right>0515</td><td></td><td nowrap>FD6C &nbsp;D0 FA</td><td></td><td class=label></td><td>BNE</td><td>DELX1</td><td class=comment></td></tr>
<tr><td align=right>0516</td><td></td><td></td><td></td><td class=hashdirective>#endif</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>0517</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0518</td><td></td><td nowrap>FD6E &nbsp;A5 1C</td><td></td><td class=label></td><td>LDA</td><td>MODADL</td><td class=comment>// Now adjust the address, for next 8 locations</td></tr>
<tr><td align=right>0519</td><td></td><td nowrap>FD70 &nbsp;18</td><td></td><td class=label></td><td>CLC</td><td></td><td class=comment></td></tr>
<tr><td align=right>0520</td><td></td><td nowrap>FD71 &nbsp;69 08</td><td></td><td class=label></td><td>ADC</td><td>#8</td><td class=comment></td></tr>
<tr><td align=right>0521</td><td></td><td nowrap>FD73 &nbsp;85 1C</td><td></td><td class=label></td><td>STA</td><td>MODADL</td><td class=comment></td></tr>
<tr><td align=right>0522</td><td></td><td nowrap>FD75 &nbsp;90 D2</td><td></td><td class=label></td><td>BCC</td><td>LISTIT</td><td class=comment>// If Carry set</td></tr>
<tr><td align=right>0523</td><td></td><td nowrap>FD77 &nbsp;E6 1D</td><td></td><td class=label></td><td>INC</td><td>MODADH</td><td class=comment>// then increment high byte</td></tr>
<tr><td align=right>0524</td><td></td><td nowrap>FD79 &nbsp;4C 49 FD</td><td></td><td class=label></td><td>JMP</td><td>LISTIT</td><td class=comment></td></tr>
<tr><td align=right>0525</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0526</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0527</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0528</td><td></td><td></td><td></td><td colspan=4 class=comment>// If we get here there  is a third parameter</td></tr>
<tr><td align=right>0529</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0530</td><td></td><td nowrap>FD7C &nbsp;E0 2C</td><td></td><td class=label>MOREY1:</td><td>CPX</td><td>#$2C</td><td class=comment>// Comma?</td></tr>
<tr><td align=right>0531</td><td></td><td nowrap>FD7E &nbsp;F0 03</td><td></td><td class=label></td><td>BEQ</td><td>TERMOK</td><td class=comment></td></tr>
<tr><td align=right>0532</td><td></td><td nowrap>FD80 &nbsp;4C EF FC</td><td></td><td class=label>ERJUM2:</td><td>JMP</td><td>LINKPH</td><td class=comment>// No - then error</td></tr>
<tr><td align=right>0533</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0534</td><td></td><td nowrap>FD83 &nbsp;A5 13</td><td></td><td class=label>TERMOK:</td><td>LDA</td><td>HXPKL</td><td class=comment>// Else store parameter</td></tr>
<tr><td align=right>0535</td><td></td><td nowrap>FD85 &nbsp;85 1E</td><td></td><td class=label></td><td>STA</td><td>COPL</td><td class=comment></td></tr>
<tr><td align=right>0536</td><td></td><td nowrap>FD87 &nbsp;A5 14</td><td></td><td class=label></td><td>LDA</td><td>HXPKH</td><td class=comment></td></tr>
<tr><td align=right>0537</td><td></td><td nowrap>FD89 &nbsp;85 1F</td><td></td><td class=label></td><td>STA</td><td>COPH</td><td class=comment></td></tr>
<tr><td align=right>0538</td><td></td><td nowrap>FD8B &nbsp;20 28 FF</td><td></td><td class=label></td><td>JSR</td><td>HEXPCK</td><td class=comment>// then pack new para</td></tr>
<tr><td align=right>0539</td><td></td><td nowrap>FD8E &nbsp;D0 F0</td><td></td><td class=label></td><td>BNE</td><td>ERJUM2</td><td class=comment>// error not term</td></tr>
<tr><td align=right>0540</td><td></td><td nowrap>FD90 &nbsp;68</td><td></td><td class=label></td><td>PLA</td><td></td><td class=comment></td></tr>
<tr><td align=right>0541</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0542</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0543</td><td></td><td></td><td></td><td colspan=4 class=comment>// M - MEMORY MODIFY / EXAMINE (modify location)</td></tr>
<tr><td align=right>0544</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0545</td><td></td><td></td><td></td><td colspan=4 class=comment>// If user has entered a value to be entered into the momeory location</td></tr>
<tr><td align=right>0546</td><td></td><td></td><td></td><td colspan=4 class=comment>// then this routine processes it</td></tr>
<tr><td align=right>0547</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0548</td><td></td><td nowrap>FD91 &nbsp;C9 4D</td><td></td><td class=label></td><td>CMP</td><td>#$4D</td><td class=comment>// Command M?</td></tr>
<tr><td align=right>0549</td><td></td><td nowrap>FD93 &nbsp;F0 27</td><td></td><td class=label></td><td>BEQ</td><td>MEM100</td><td class=comment>// Yes - modify memory</td></tr>
<tr><td align=right>0550</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0551</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0552</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0553</td><td></td><td></td><td></td><td colspan=4 class=comment>// C - COPY COMMAND</td></tr>
<tr><td align=right>0554</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0555</td><td></td><td></td><td></td><td colspan=4 class=comment>// The copy command allows copying of the contents of one block of memory to</td></tr>
<tr><td align=right>0556</td><td></td><td></td><td></td><td colspan=4 class=comment>// another. The parameters are start address source, end address source and</td></tr>
<tr><td align=right>0557</td><td></td><td></td><td></td><td colspan=4 class=comment>// start address destination. These are copied to MODADL, COPL, and HXPKL</td></tr>
<tr><td align=right>0558</td><td></td><td></td><td></td><td colspan=4 class=comment>// respectively.</td></tr>
<tr><td align=right>0559</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0560</td><td></td><td nowrap>FD95 &nbsp;C9 43</td><td></td><td class=label></td><td>CMP</td><td>#$43</td><td class=comment>// Command C?</td></tr>
<tr><td align=right>0561</td><td></td><td nowrap>FD97 &nbsp;D0 9B</td><td></td><td class=label></td><td>BNE</td><td>LINK1</td><td class=comment>// No - then error</td></tr>
<tr><td align=right>0562</td><td></td><td nowrap>FD99 &nbsp;50 99</td><td></td><td class=label></td><td>BVC</td><td>LINK1</td><td class=comment>// Argument? Error if not</td></tr>
<tr><td align=right>0563</td><td></td><td nowrap>FD9B &nbsp;A0 00</td><td></td><td class=label></td><td>LDY</td><td>#0</td><td class=comment></td></tr>
<tr><td align=right>0564</td><td></td><td nowrap>FD9D &nbsp;B1 1C</td><td></td><td class=label>NXCOP:</td><td>LDA</td><td>(MODADL),Y</td><td class=comment>// Copy from source start address</td></tr>
<tr><td align=right>0565</td><td></td><td nowrap>FD9F &nbsp;91 13</td><td></td><td class=label></td><td>STA</td><td>(HXPKL),Y</td><td class=comment>// to destination</td></tr>
<tr><td align=right>0566</td><td></td><td nowrap>FDA1 &nbsp;A5 1F</td><td></td><td class=label></td><td>LDA</td><td>COPH</td><td class=comment>// Check if we've reached end address</td></tr>
<tr><td align=right>0567</td><td></td><td nowrap>FDA3 &nbsp;C5 1D</td><td></td><td class=label></td><td>CMP</td><td>MODADH</td><td class=comment></td></tr>
<tr><td align=right>0568</td><td></td><td nowrap>FDA5 &nbsp;D0 06</td><td></td><td class=label></td><td>BNE</td><td>ICMCOP</td><td class=comment></td></tr>
<tr><td align=right>0569</td><td></td><td nowrap>FDA7 &nbsp;A5 1E</td><td></td><td class=label></td><td>LDA</td><td>COPL</td><td class=comment></td></tr>
<tr><td align=right>0570</td><td></td><td nowrap>FDA9 &nbsp;C5 1C</td><td></td><td class=label></td><td>CMP</td><td>MODADL</td><td class=comment></td></tr>
<tr><td align=right>0571</td><td></td><td nowrap>FDAB &nbsp;F0 5B</td><td></td><td class=label></td><td>BEQ</td><td>ENDLS</td><td class=comment></td></tr>
<tr><td align=right>0572</td><td></td><td nowrap>FDAD &nbsp;E6 1C</td><td></td><td class=label>ICMCOP:</td><td>INC</td><td>MODADL</td><td class=comment>// No, then increment source</td></tr>
<tr><td align=right>0573</td><td></td><td nowrap>FDAF &nbsp;D0 02</td><td></td><td class=label></td><td>BNE</td><td>NOHIH1</td><td class=comment></td></tr>
<tr><td align=right>0574</td><td></td><td nowrap>FDB1 &nbsp;E6 1D</td><td></td><td class=label></td><td>INC</td><td>MODADH</td><td class=comment></td></tr>
<tr><td align=right>0575</td><td></td><td nowrap>FDB3 &nbsp;E6 13</td><td></td><td class=label>NOHIH1:</td><td>INC</td><td>HXPKL</td><td class=comment>// and increment destination</td></tr>
<tr><td align=right>0576</td><td></td><td nowrap>FDB5 &nbsp;D0 E6</td><td></td><td class=label></td><td>BNE</td><td>NXCOP</td><td class=comment></td></tr>
<tr><td align=right>0577</td><td></td><td nowrap>FDB7 &nbsp;E6 14</td><td></td><td class=label></td><td>INC</td><td>HXPKH</td><td class=comment></td></tr>
<tr><td align=right>0578</td><td></td><td nowrap>FDB9 &nbsp;D0 E2</td><td></td><td class=label></td><td>BNE</td><td>NXCOP</td><td class=comment>// Destination can not roll over top of memory</td></tr>
<tr><td align=right>0579</td><td></td><td nowrap>FDBB &nbsp;60</td><td></td><td class=label></td><td>RTS</td><td></td><td class=comment></td></tr>
<tr><td align=right>0580</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0581</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0582</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0583</td><td></td><td></td><td></td><td colspan=4 class=comment>// Modify memory location (M command above)</td></tr>
<tr><td align=right>0584</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0585</td><td></td><td nowrap>FDBC &nbsp;A6 01</td><td></td><td class=label>MEM100:</td><td>LDX</td><td>ICHAR</td><td class=comment>// Get input character in IX</td></tr>
<tr><td align=right>0586</td><td></td><td nowrap>FDBE &nbsp;E0 20</td><td></td><td class=label></td><td>CPX</td><td>#$20</td><td class=comment>// Was it a space?</td></tr>
<tr><td align=right>0587</td><td></td><td nowrap>FDC0 &nbsp;F0 23</td><td></td><td class=label></td><td>BEQ</td><td>REOPEN</td><td class=comment>// Yes - reopen</td></tr>
<tr><td align=right>0588</td><td></td><td nowrap>FDC2 &nbsp;50 06</td><td></td><td class=label></td><td>BVC</td><td>NOENT</td><td class=comment>// Branch if nothing</td></tr>
<tr><td align=right>0589</td><td></td><td nowrap>FDC4 &nbsp;A5 13</td><td></td><td class=label></td><td>LDA</td><td>HXPKL</td><td class=comment>// Else enter data</td></tr>
<tr><td align=right>0590</td><td></td><td nowrap>FDC6 &nbsp;A0 00</td><td></td><td class=label></td><td>LDY</td><td>#0</td><td class=comment></td></tr>
<tr><td align=right>0591</td><td></td><td nowrap>FDC8 &nbsp;91 1C</td><td></td><td class=label></td><td>STA</td><td>(MODADL),Y</td><td class=comment></td></tr>
<tr><td align=right>0592</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0593</td><td></td><td nowrap>FDCA &nbsp;E0 0A</td><td></td><td class=label>NOENT:</td><td>CPX</td><td>#$0A</td><td class=comment>// Was LF typed?</td></tr>
<tr><td align=right>0594</td><td></td><td nowrap>FDCC &nbsp;F0 11</td><td></td><td class=label></td><td>BEQ</td><td>WASLF</td><td class=comment>// Yes - then process it</td></tr>
<tr><td align=right>0595</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0596</td><td></td><td nowrap>FDCE &nbsp;E0 1B</td><td></td><td class=label></td><td>CPX</td><td>#$1B</td><td class=comment>// Was it ESC?</td></tr>
<tr><td align=right>0597</td><td></td><td nowrap>FDD0 &nbsp;D0 36</td><td></td><td class=label></td><td>BNE</td><td>ENDLS</td><td class=comment>// No - then return</td></tr>
<tr><td align=right>0598</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0599</td><td></td><td nowrap>FDD2 &nbsp;C6 1C</td><td></td><td class=label>ESCIT:</td><td>DEC</td><td>MODADL</td><td class=comment>// Decrement memory modify address</td></tr>
<tr><td align=right>0600</td><td></td><td nowrap>FDD4 &nbsp;A5 1C</td><td></td><td class=label></td><td>LDA</td><td>MODADL</td><td class=comment></td></tr>
<tr><td align=right>0601</td><td></td><td nowrap>FDD6 &nbsp;C9 FF</td><td></td><td class=label></td><td>CMP</td><td>#$FF</td><td class=comment></td></tr>
<tr><td align=right>0602</td><td></td><td nowrap>FDD8 &nbsp;D0 0B</td><td></td><td class=label></td><td>BNE</td><td>REOPEN</td><td class=comment></td></tr>
<tr><td align=right>0603</td><td></td><td nowrap>FDDA &nbsp;C6 1D</td><td></td><td class=label></td><td>DEC</td><td>MODADH</td><td class=comment></td></tr>
<tr><td align=right>0604</td><td></td><td nowrap>FDDC &nbsp;4C E5 FD</td><td></td><td class=label></td><td>JMP</td><td>REOPEN</td><td class=comment></td></tr>
<tr><td align=right>0605</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0606</td><td></td><td nowrap>FDDF &nbsp;E6 1C</td><td></td><td class=label>WASLF:</td><td>INC</td><td>MODADL</td><td class=comment>// Increment memory address</td></tr>
<tr><td align=right>0607</td><td></td><td nowrap>FDE1 &nbsp;D0 02</td><td></td><td class=label></td><td>BNE</td><td>REOPEN</td><td class=comment></td></tr>
<tr><td align=right>0608</td><td></td><td nowrap>FDE3 &nbsp;E6 1D</td><td></td><td class=label></td><td>INC</td><td>MODADH</td><td class=comment>// and high byte, if required</td></tr>
<tr><td align=right>0609</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0610</td><td></td><td nowrap>FDE5 &nbsp;20 73 FE</td><td></td><td class=label>REOPEN:</td><td>JSR</td><td>OUTPCR</td><td class=comment>// Output carriage return</td></tr>
<tr><td align=right>0611</td><td></td><td nowrap>FDE8 &nbsp;A9 4D</td><td></td><td class=label></td><td>LDA</td><td>#$4D</td><td class=comment></td></tr>
<tr><td align=right>0612</td><td></td><td nowrap>FDEA &nbsp;20 75 FE</td><td></td><td class=label></td><td>JSR</td><td>OPCHR</td><td class=comment>// Display 'M'</td></tr>
<tr><td align=right>0613</td><td></td><td nowrap>FDED &nbsp;A5 1D</td><td></td><td class=label></td><td>LDA</td><td>MODADH</td><td class=comment>// and address</td></tr>
<tr><td align=right>0614</td><td></td><td nowrap>FDEF &nbsp;20 0B FF</td><td></td><td class=label></td><td>JSR</td><td>HEXPNT</td><td class=comment></td></tr>
<tr><td align=right>0615</td><td></td><td nowrap>FDF2 &nbsp;A5 1C</td><td></td><td class=label></td><td>LDA</td><td>MODADL</td><td class=comment></td></tr>
<tr><td align=right>0616</td><td></td><td nowrap>FDF4 &nbsp;20 0B FF</td><td></td><td class=label></td><td>JSR</td><td>HEXPNT</td><td class=comment></td></tr>
<tr><td align=right>0617</td><td></td><td nowrap>FDF7 &nbsp;4C 4F FC</td><td></td><td class=label></td><td>JMP</td><td>MONEN2</td><td class=comment>// Check next command</td></tr>
<tr><td align=right>0618</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0619</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0620</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0621</td><td></td><td></td><td></td><td colspan=4 class=comment>// POLL KEYBOARD</td></tr>
<tr><td align=right>0622</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0623</td><td></td><td></td><td></td><td colspan=4 class=comment>// Gets a character from either the simple keypad or ASCII keyboard. Key</td></tr>
<tr><td align=right>0624</td><td></td><td></td><td></td><td colspan=4 class=comment>// value is stored in ICHAR ($01)</td></tr>
<tr><td align=right>0625</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0626</td><td></td><td nowrap>FDFA &nbsp;A9 00</td><td></td><td class=label>POLLKB:</td><td>LDA</td><td>#0</td><td class=comment></td></tr>
<tr><td align=right>0627</td><td></td><td nowrap>FDFC &nbsp;48</td><td></td><td class=label></td><td>PHA</td><td></td><td class=comment>// Push 0 - shift indicator</td></tr>
<tr><td align=right>0628</td><td></td><td nowrap>FDFD &nbsp;85 01</td><td></td><td class=label>PLKB1:</td><td>STA</td><td>ICHAR</td><td class=comment>// Set ICHAR to zero</td></tr>
<tr><td align=right>0629</td><td></td><td nowrap>FDFF &nbsp;C5 0F</td><td></td><td class=label></td><td>CMP</td><td>SIMCOM</td><td class=comment>// Check if keypad</td></tr>
<tr><td align=right>0630</td><td></td><td nowrap>FE01 &nbsp;D0 06</td><td></td><td class=label></td><td>BNE</td><td>SIMPLE</td><td class=comment></td></tr>
<tr><td align=right>0631</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0632</td><td></td><td></td><td></td><td colspan=4 class=comment>// ASCII keyboard routine</td></tr>
<tr><td align=right>0633</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0634</td><td></td><td nowrap>FE03 &nbsp;C5 01</td><td></td><td class=label>WAIT1:</td><td>CMP</td><td>ICHAR</td><td class=comment>// Else wait for interrupt</td></tr>
<tr><td align=right>0635</td><td></td><td nowrap>FE05 &nbsp;F0 FC</td><td></td><td class=label></td><td>BEQ</td><td>WAIT1</td><td class=comment></td></tr>
<tr><td align=right>0636</td><td></td><td nowrap>FE07 &nbsp;68</td><td></td><td class=label>PLKEND:</td><td>PLA</td><td></td><td class=comment>// Pop indicator</td></tr>
<tr><td align=right>0637</td><td></td><td nowrap>FE08 &nbsp;60</td><td></td><td class=label>ENDLS:</td><td>RTS</td><td></td><td class=comment></td></tr>
<tr><td align=right>0638</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0639</td><td></td><td></td><td></td><td colspan=4 class=comment>// Simple keypad routine</td></tr>
<tr><td align=right>0640</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0641</td><td></td><td nowrap>FE09 &nbsp;A9 0F</td><td></td><td class=label>SIMPLE:</td><td>LDA</td><td>#$0F</td><td class=comment></td></tr>
<tr><td align=right>0642</td><td></td><td nowrap>FE0B &nbsp;8D F2 BF</td><td></td><td class=label></td><td>STA</td><td>KBWRIT</td><td class=comment>// Enable all keyboard lines</td></tr>
<tr><td align=right>0643</td><td></td><td nowrap>FE0E &nbsp;AD F3 BF</td><td></td><td class=label></td><td>LDA</td><td>KBREAD</td><td class=comment>// Look at keyboard lines</td></tr>
<tr><td align=right>0644</td><td></td><td nowrap>FE11 &nbsp;D0 F6</td><td></td><td class=label></td><td>BNE</td><td>SIMPLE</td><td class=comment>// Key down? - wait till up</td></tr>
<tr><td align=right>0645</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0646</td><td></td><td nowrap>FE13 &nbsp;A2 40</td><td></td><td class=label></td><td>LDX</td><td>#$40</td><td class=comment>// Debounce it</td></tr>
<tr><td align=right>0647</td><td></td><td nowrap>FE15 &nbsp;88</td><td></td><td class=label>DEBOUN:</td><td>DEY</td><td></td><td class=comment></td></tr>
<tr><td align=right>0648</td><td></td><td nowrap>FE16 &nbsp;D0 FD</td><td></td><td class=label></td><td>BNE</td><td>DEBOUN</td><td class=comment></td></tr>
<tr><td align=right>0649</td><td></td><td nowrap>FE18 &nbsp;CA</td><td></td><td class=label></td><td>DEX</td><td></td><td class=comment></td></tr>
<tr><td align=right>0650</td><td></td><td nowrap>FE19 &nbsp;D0 FA</td><td></td><td class=label></td><td>BNE</td><td>DEBOUN</td><td class=comment></td></tr>
<tr><td align=right>0651</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0652</td><td></td><td nowrap>FE1B &nbsp;A0 FF</td><td></td><td class=label>PLK1:</td><td>LDY</td><td>#$FF</td><td class=comment>// Now poll the keypad properly</td></tr>
<tr><td align=right>0653</td><td></td><td nowrap>FE1D &nbsp;68</td><td></td><td class=label></td><td>PLA</td><td></td><td class=comment>// Peek at shift indicator</td></tr>
<tr><td align=right>0654</td><td></td><td nowrap>FE1E &nbsp;48</td><td></td><td class=label></td><td>PHA</td><td></td><td class=comment></td></tr>
<tr><td align=right>0655</td><td></td><td nowrap>FE1F &nbsp;F0 02</td><td></td><td class=label></td><td>BEQ</td><td>NOSHIF</td><td class=comment>// If shift set modify IY</td></tr>
<tr><td align=right>0656</td><td></td><td nowrap>FE21 &nbsp;A0 13</td><td></td><td class=label></td><td>LDY</td><td>#$13</td><td class=comment></td></tr>
<tr><td align=right>0657</td><td></td><td nowrap>FE23 &nbsp;A2 08</td><td></td><td class=label>NOSHIF:</td><td>LDX</td><td>#8</td><td class=comment>// Set IX - keyboard drive</td></tr>
<tr><td align=right>0658</td><td></td><td nowrap>FE25 &nbsp;8E F2 BF</td><td></td><td class=label>PLK2:</td><td>STX</td><td>KBWRIT</td><td class=comment>// Drive keyboard lines</td></tr>
<tr><td align=right>0659</td><td></td><td nowrap>FE28 &nbsp;AD F3 BF</td><td></td><td class=label></td><td>LDA</td><td>KBREAD</td><td class=comment>// Get result</td></tr>
<tr><td align=right>0660</td><td></td><td nowrap>FE2B &nbsp;D0 0C</td><td></td><td class=label></td><td>BNE</td><td>ACHAR</td><td class=comment>// Not 0 - a char - so skip</td></tr>
<tr><td align=right>0661</td><td></td><td nowrap>FE2D &nbsp;C8</td><td></td><td class=label></td><td>INY</td><td></td><td class=comment>// Else adjust IY</td></tr>
<tr><td align=right>0662</td><td></td><td nowrap>FE2E &nbsp;C8</td><td></td><td class=label></td><td>INY</td><td></td><td class=comment></td></tr>
<tr><td align=right>0663</td><td></td><td nowrap>FE2F &nbsp;C8</td><td></td><td class=label></td><td>INY</td><td></td><td class=comment></td></tr>
<tr><td align=right>0664</td><td></td><td nowrap>FE30 &nbsp;C8</td><td></td><td class=label></td><td>INY</td><td></td><td class=comment></td></tr>
<tr><td align=right>0665</td><td></td><td nowrap>FE31 &nbsp;C8</td><td></td><td class=label></td><td>INY</td><td></td><td class=comment></td></tr>
<tr><td align=right>0666</td><td></td><td nowrap>FE32 &nbsp;8A</td><td></td><td class=label></td><td>TXA</td><td></td><td class=comment></td></tr>
<tr><td align=right>0667</td><td></td><td nowrap>FE33 &nbsp;4A</td><td></td><td class=label></td><td>LSR</td><td>A</td><td class=comment>// Shift IX right</td></tr>
<tr><td align=right>0668</td><td></td><td nowrap>FE34 &nbsp;AA</td><td></td><td class=label></td><td>TAX</td><td></td><td class=comment></td></tr>
<tr><td align=right>0669</td><td></td><td nowrap>FE35 &nbsp;F0 E4</td><td></td><td class=label></td><td>BEQ</td><td>PLK1</td><td class=comment>// If zero repeat</td></tr>
<tr><td align=right>0670</td><td></td><td nowrap>FE37 &nbsp;D0 EC</td><td></td><td class=label></td><td>BNE</td><td>PLK2</td><td class=comment>// Else next line</td></tr>
<tr><td align=right>0671</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0672</td><td></td><td></td><td></td><td colspan=4 class=comment>// If we get here a key has been pressed</td></tr>
<tr><td align=right>0673</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0674</td><td></td><td nowrap>FE39 &nbsp;C8</td><td></td><td class=label>ACHAR:</td><td>INY</td><td></td><td class=comment></td></tr>
<tr><td align=right>0675</td><td></td><td nowrap>FE3A &nbsp;4A</td><td></td><td class=label></td><td>LSR</td><td>A</td><td class=comment>// Which key of 5?</td></tr>
<tr><td align=right>0676</td><td></td><td nowrap>FE3B &nbsp;90 FC</td><td></td><td class=label></td><td>BCC</td><td>ACHAR</td><td class=comment>// C set? That's the key</td></tr>
<tr><td align=right>0677</td><td></td><td nowrap>FE3D &nbsp;B9 4B FE</td><td></td><td class=label></td><td>LDA</td><td>CHRTBL,Y</td><td class=comment>// Get ASCII equivalent</td></tr>
<tr><td align=right>0678</td><td></td><td nowrap>FE40 &nbsp;85 01</td><td></td><td class=label></td><td>STA</td><td>ICHAR</td><td class=comment>// And put in ICHAR</td></tr>
<tr><td align=right>0679</td><td></td><td nowrap>FE42 &nbsp;D0 C3</td><td></td><td class=label></td><td>BNE</td><td>PLKEND</td><td class=comment>// If zero - shift</td></tr>
<tr><td align=right>0680</td><td></td><td nowrap>FE44 &nbsp;68</td><td></td><td class=label></td><td>PLA</td><td></td><td class=comment>// Pull shift</td></tr>
<tr><td align=right>0681</td><td></td><td nowrap>FE45 &nbsp;49 FF</td><td></td><td class=label></td><td>EOR</td><td>#$FF</td><td class=comment>// Change shift state</td></tr>
<tr><td align=right>0682</td><td></td><td nowrap>FE47 &nbsp;48</td><td></td><td class=label></td><td>PHA</td><td></td><td class=comment>// Push shift</td></tr>
<tr><td align=right>0683</td><td></td><td nowrap>FE48 &nbsp;4C 09 FE</td><td></td><td class=label></td><td>JMP</td><td>SIMPLE</td><td class=comment>// ... and continue</td></tr>
<tr><td align=right>0684</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0685</td><td></td><td></td><td></td><td colspan=4 class=comment>// Character look up table for ASCII equivalent</td></tr>
<tr><td align=right>0686</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0687</td><td></td><td nowrap>FE4B &nbsp;33 37 42</td><td></td><td class=label>CHRTBL:</td><td>FCB</td><td>$33, $37, $42</td><td class=comment></td></tr>
<tr><td align=right>0688</td><td></td><td nowrap>FE4E &nbsp;46 3F</td><td></td><td class=label></td><td>FCB</td><td>$46, $3F</td><td class=comment></td></tr>
<tr><td align=right>0689</td><td></td><td nowrap>FE50 &nbsp;32 36 41</td><td></td><td class=label></td><td>FCB</td><td>$32, $36, $41</td><td class=comment></td></tr>
<tr><td align=right>0690</td><td></td><td nowrap>FE53 &nbsp;45 0D</td><td></td><td class=label></td><td>FCB</td><td>$45, $0D</td><td class=comment></td></tr>
<tr><td align=right>0691</td><td></td><td nowrap>FE55 &nbsp;31 35 39</td><td></td><td class=label></td><td>FCB</td><td>$31, $35, $39</td><td class=comment></td></tr>
<tr><td align=right>0692</td><td></td><td nowrap>FE58 &nbsp;44 0A</td><td></td><td class=label></td><td>FCB</td><td>$44, $0A</td><td class=comment></td></tr>
<tr><td align=right>0693</td><td></td><td nowrap>FE5A &nbsp;30 34 38</td><td></td><td class=label></td><td>FCB</td><td>$30, $34, $38</td><td class=comment></td></tr>
<tr><td align=right>0694</td><td></td><td nowrap>FE5D &nbsp;43 00</td><td></td><td class=label></td><td>FCB</td><td>$43, $00</td><td class=comment></td></tr>
<tr><td align=right>0695</td><td></td><td nowrap>FE5F &nbsp;2C 52 4C</td><td></td><td class=label></td><td>FCB</td><td>$2C, $52, $4C</td><td class=comment></td></tr>
<tr><td align=right>0696</td><td></td><td nowrap>FE62 &nbsp;4E 3F</td><td></td><td class=label></td><td>FCB</td><td>$4E, $3F</td><td class=comment></td></tr>
<tr><td align=right>0697</td><td></td><td nowrap>FE64 &nbsp;32 43 49</td><td></td><td class=label></td><td>FCB</td><td>$32, $43, $49</td><td class=comment></td></tr>
<tr><td align=right>0698</td><td></td><td nowrap>FE67 &nbsp;53 20</td><td></td><td class=label></td><td>FCB</td><td>$53, $20</td><td class=comment></td></tr>
<tr><td align=right>0699</td><td></td><td nowrap>FE69 &nbsp;31 4F 1B</td><td></td><td class=label></td><td>FCB</td><td>$31, $4F, $1B</td><td class=comment></td></tr>
<tr><td align=right>0700</td><td></td><td nowrap>FE6C &nbsp;47 7F</td><td></td><td class=label></td><td>FCB</td><td>$47, $7F</td><td class=comment></td></tr>
<tr><td align=right>0701</td><td></td><td nowrap>FE6E &nbsp;30 34 50</td><td></td><td class=label></td><td>FCB</td><td>$30, $34, $50</td><td class=comment></td></tr>
<tr><td align=right>0702</td><td></td><td nowrap>FE71 &nbsp;4D 00</td><td></td><td class=label></td><td>FCB</td><td>$4D, $00</td><td class=comment></td></tr>
<tr><td align=right>0703</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0704</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0705</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0706</td><td></td><td></td><td></td><td colspan=4 class=comment>// OUTPUT A CARRIAGE RETURN</td></tr>
<tr><td align=right>0707</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0708</td><td></td><td></td><td></td><td colspan=4 class=comment>// This subroutine causes the display to scroll up one line by outputting</td></tr>
<tr><td align=right>0709</td><td></td><td></td><td></td><td colspan=4 class=comment>// a carriage return to the screen. It also reinstates the cursor when a</td></tr>
<tr><td align=right>0710</td><td></td><td></td><td></td><td colspan=4 class=comment>// user program is run with the G command</td></tr>
<tr><td align=right>0711</td><td></td><td></td><td></td><td colspan=4 class=comment>// ACC is corrupted, IX and IY are preserved</td></tr>
<tr><td align=right>0712</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0713</td><td></td><td nowrap>FE73 &nbsp;A9 0D</td><td></td><td class=label>OUTPCR:</td><td>LDA</td><td>#$0D</td><td class=comment>// Output a CR</td></tr>
<tr><td align=right>0714</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0715</td><td></td><td></td><td></td><td colspan=4 class=comment>// OUTPUT A CHARACTER</td></tr>
<tr><td align=right>0716</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0717</td><td></td><td></td><td></td><td colspan=4 class=comment>// Displays the character in the ACC on the screen</td></tr>
<tr><td align=right>0718</td><td></td><td></td><td></td><td colspan=4 class=comment>// ACC is corrupted, IX and IY are preserved</td></tr>
<tr><td align=right>0719</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0720</td><td></td><td></td><td></td><td class=hashdirective>#if</td><td colspan=2 class=hashdirective>TANEX</td><td class=comment></td></tr>
<tr><td align=right>0721</td><td></td><td nowrap></td><td></td><td class=label>OPCHR:</td><td>JMP</td><td>$F87C</td><td class=comment></td></tr>
<tr><td align=right>0722</td><td></td><td nowrap></td><td></td><td class=label></td><td>NOP</td><td></td><td class=comment></td></tr>
<tr><td align=right>0723</td><td></td><td nowrap></td><td></td><td class=label>OPCHR1:</td><td>STA</td><td>OCHAR</td><td class=comment></td></tr>
<tr><td align=right>0724</td><td></td><td nowrap></td><td></td><td class=label></td><td>LDY</td><td>VDUIND</td><td class=comment>// Get cursor position</td></tr>
<tr><td align=right>0725</td><td></td><td nowrap></td><td></td><td class=label></td><td>LDA</td><td>#$20</td><td class=comment></td></tr>
<tr><td align=right>0726</td><td></td><td nowrap></td><td></td><td class=label></td><td>STA</td><td>(ICURS),Y</td><td class=comment>// and erase cursor</td></tr>
<tr><td align=right>0727</td><td></td><td nowrap></td><td></td><td class=label></td><td>LDX</td><td>OCHAR</td><td class=comment>// Get char in IX</td></tr>
<tr><td align=right>0728</td><td></td><td nowrap></td><td></td><td class=label></td><td>CPX</td><td>#12</td><td class=comment></td></tr>
<tr><td align=right>0729</td><td></td><td nowrap></td><td></td><td class=label></td><td>BNE</td><td>TRYDEL</td><td class=comment></td></tr>
<tr><td align=right>0730</td><td></td><td nowrap></td><td></td><td class=label></td><td>JSR</td><td>$FA23</td><td class=comment></td></tr>
<tr><td align=right>0731</td><td></td><td nowrap></td><td></td><td class=label>DODEL:</td><td>LDA</td><td>#$FF</td><td class=comment></td></tr>
<tr><td align=right>0732</td><td></td><td nowrap></td><td></td><td class=label></td><td>STA</td><td>(ICURS),Y</td><td class=comment>// Display cursor</td></tr>
<tr><td align=right>0733</td><td></td><td nowrap></td><td></td><td class=label></td><td>STY</td><td>VDUIND</td><td class=comment>// and save index</td></tr>
<tr><td align=right>0734</td><td></td><td nowrap></td><td></td><td class=label></td><td>RTS</td><td></td><td class=comment></td></tr>
<tr><td align=right>0735</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0736</td><td></td><td nowrap></td><td></td><td class=label>TRYDEL:</td><td>CPX</td><td>#$7F</td><td class=comment>// Is it delete?</td></tr>
<tr><td align=right>0737</td><td></td><td nowrap></td><td></td><td class=label></td><td>BNE</td><td>TRYCR</td><td class=comment></td></tr>
<tr><td align=right>0738</td><td></td><td nowrap></td><td></td><td class=label></td><td>JSR</td><td>$FA09</td><td class=comment></td></tr>
<tr><td align=right>0739</td><td></td><td nowrap></td><td></td><td class=label></td><td>BPL</td><td>DODEL</td><td class=comment></td></tr>
<tr><td align=right>0740</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0741</td><td></td><td nowrap></td><td></td><td class=label>TRYCR:</td><td>CPX</td><td>#$0D</td><td class=comment>// Is it a CR?</td></tr>
<tr><td align=right>0742</td><td></td><td nowrap></td><td></td><td class=label></td><td>BEQ</td><td>NXLINE</td><td class=comment></td></tr>
<tr><td align=right>0743</td><td></td><td nowrap></td><td></td><td class=label></td><td>TXA</td><td></td><td class=comment>// No, then output character</td></tr>
<tr><td align=right>0744</td><td></td><td nowrap></td><td></td><td class=label></td><td>STA</td><td>(ICURS),Y</td><td class=comment></td></tr>
<tr><td align=right>0745</td><td></td><td nowrap></td><td></td><td class=label></td><td>INY</td><td></td><td class=comment>// Increment vdu index</td></tr>
<tr><td align=right>0746</td><td></td><td nowrap></td><td></td><td class=label></td><td>CPY</td><td>#32</td><td class=comment>// End of line?</td></tr>
<tr><td align=right>0747</td><td></td><td nowrap></td><td></td><td class=label></td><td>BNE</td><td>DODEL</td><td class=comment></td></tr>
<tr><td align=right>0748</td><td></td><td nowrap></td><td></td><td class=label>NXLINE:</td><td>LDA</td><td>#32</td><td class=comment></td></tr>
<tr><td align=right>0749</td><td></td><td nowrap></td><td></td><td class=label></td><td>CLC</td><td></td><td class=comment></td></tr>
<tr><td align=right>0750</td><td></td><td nowrap></td><td></td><td class=label></td><td>ADC</td><td>ICURS</td><td class=comment></td></tr>
<tr><td align=right>0751</td><td></td><td nowrap></td><td></td><td class=label></td><td>STA</td><td>ICURS</td><td class=comment></td></tr>
<tr><td align=right>0752</td><td></td><td nowrap></td><td></td><td class=label></td><td>LDA</td><td>ICURS+1</td><td class=comment></td></tr>
<tr><td align=right>0753</td><td></td><td nowrap></td><td></td><td class=label></td><td>ADC</td><td>#0</td><td class=comment></td></tr>
<tr><td align=right>0754</td><td></td><td nowrap></td><td></td><td class=label></td><td>STA</td><td>ICURS+1</td><td class=comment></td></tr>
<tr><td align=right>0755</td><td></td><td nowrap></td><td></td><td class=label></td><td>LDY</td><td>#0</td><td class=comment></td></tr>
<tr><td align=right>0756</td><td></td><td nowrap></td><td></td><td class=label></td><td>CMP</td><td>#4</td><td class=comment></td></tr>
<tr><td align=right>0757</td><td></td><td nowrap></td><td></td><td class=label></td><td>BNE</td><td>DODEL</td><td class=comment></td></tr>
<tr><td align=right>0758</td><td></td><td nowrap></td><td></td><td class=label></td><td>JSR</td><td>$FA38</td><td class=comment></td></tr>
<tr><td align=right>0759</td><td></td><td nowrap></td><td></td><td class=label></td><td>BEQ</td><td>DODEL</td><td class=comment></td></tr>
<tr><td align=right>0760</td><td></td><td nowrap></td><td></td><td class=label></td><td>NOP</td><td></td><td class=comment></td></tr>
<tr><td align=right>0761</td><td></td><td nowrap></td><td></td><td class=label></td><td>NOP</td><td></td><td class=comment></td></tr>
<tr><td align=right>0762</td><td></td><td nowrap></td><td></td><td class=label></td><td>NOP</td><td></td><td class=comment></td></tr>
<tr><td align=right>0763</td><td></td><td nowrap></td><td></td><td class=label></td><td>NOP</td><td></td><td class=comment></td></tr>
<tr><td align=right>0764</td><td></td><td nowrap></td><td></td><td class=label></td><td>NOP</td><td></td><td class=comment></td></tr>
<tr><td align=right>0765</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0766</td><td></td><td></td><td></td><td class=hashdirective>#else</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>0767</td><td></td><td nowrap>FE75 &nbsp;85 02</td><td></td><td class=label>OPCHR:</td><td>STA</td><td>OCHAR</td><td class=comment>// Save the character</td></tr>
<tr><td align=right>0768</td><td></td><td nowrap>FE77 &nbsp;8A</td><td></td><td class=label></td><td>TXA</td><td></td><td class=comment>// Save IX and IY</td></tr>
<tr><td align=right>0769</td><td></td><td nowrap>FE78 &nbsp;48</td><td></td><td class=label></td><td>PHA</td><td></td><td class=comment></td></tr>
<tr><td align=right>0770</td><td></td><td nowrap>FE79 &nbsp;98</td><td></td><td class=label></td><td>TYA</td><td></td><td class=comment></td></tr>
<tr><td align=right>0771</td><td></td><td nowrap>FE7A &nbsp;48</td><td></td><td class=label></td><td>PHA</td><td></td><td class=comment></td></tr>
<tr><td align=right>0772</td><td></td><td nowrap>FE7B &nbsp;A4 03</td><td></td><td class=label></td><td>LDY</td><td>VDUIND</td><td class=comment>// Get cursor position</td></tr>
<tr><td align=right>0773</td><td></td><td nowrap>FE7D &nbsp;A9 20</td><td></td><td class=label></td><td>LDA</td><td>#$20</td><td class=comment></td></tr>
<tr><td align=right>0774</td><td></td><td nowrap>FE7F &nbsp;91 0A</td><td></td><td class=label></td><td>STA</td><td>(ICURS),Y</td><td class=comment>// and erase cursor</td></tr>
<tr><td align=right>0775</td><td></td><td nowrap>FE81 &nbsp;A6 02</td><td></td><td class=label></td><td>LDX</td><td>OCHAR</td><td class=comment>// Get char in IX</td></tr>
<tr><td align=right>0776</td><td></td><td nowrap>FE83 &nbsp;E0 7F</td><td></td><td class=label></td><td>CPX</td><td>#$7F</td><td class=comment>// Is it delete?</td></tr>
<tr><td align=right>0777</td><td></td><td nowrap>FE85 &nbsp;D0 10</td><td></td><td class=label></td><td>BNE</td><td>TRYCR</td><td class=comment></td></tr>
<tr><td align=right>0778</td><td></td><td nowrap>FE87 &nbsp;88</td><td></td><td class=label></td><td>DEY</td><td></td><td class=comment>// Decrement vdu index</td></tr>
<tr><td align=right>0779</td><td></td><td nowrap>FE88 &nbsp;10 02</td><td></td><td class=label></td><td>BPL</td><td>DODEL</td><td class=comment></td></tr>
<tr><td align=right>0780</td><td></td><td nowrap>FE8A &nbsp;A0 00</td><td></td><td class=label>ZERCUR:</td><td>LDY</td><td>#0</td><td class=comment>// If negative set zero</td></tr>
<tr><td align=right>0781</td><td></td><td nowrap>FE8C &nbsp;A9 FF</td><td></td><td class=label>DODEL:</td><td>LDA</td><td>#$FF</td><td class=comment></td></tr>
<tr><td align=right>0782</td><td></td><td nowrap>FE8E &nbsp;91 0A</td><td></td><td class=label></td><td>STA</td><td>(ICURS),Y</td><td class=comment>// Display cursor</td></tr>
<tr><td align=right>0783</td><td></td><td nowrap>FE90 &nbsp;84 03</td><td></td><td class=label></td><td>STY</td><td>VDUIND</td><td class=comment>// and save index</td></tr>
<tr><td align=right>0784</td><td></td><td nowrap>FE92 &nbsp;68</td><td></td><td class=label></td><td>PLA</td><td></td><td class=comment>// Restore registers and exit</td></tr>
<tr><td align=right>0785</td><td></td><td nowrap>FE93 &nbsp;A8</td><td></td><td class=label></td><td>TAY</td><td></td><td class=comment></td></tr>
<tr><td align=right>0786</td><td></td><td nowrap>FE94 &nbsp;68</td><td></td><td class=label></td><td>PLA</td><td></td><td class=comment></td></tr>
<tr><td align=right>0787</td><td></td><td nowrap>FE95 &nbsp;AA</td><td></td><td class=label></td><td>TAX</td><td></td><td class=comment></td></tr>
<tr><td align=right>0788</td><td></td><td nowrap>FE96 &nbsp;60</td><td></td><td class=label></td><td>RTS</td><td></td><td class=comment></td></tr>
<tr><td align=right>0789</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0790</td><td></td><td nowrap>FE97 &nbsp;E0 0D</td><td></td><td class=label>TRYCR:</td><td>CPX</td><td>#13</td><td class=comment>// Is it a CR?</td></tr>
<tr><td align=right>0791</td><td></td><td nowrap>FE99 &nbsp;F0 08</td><td></td><td class=label></td><td>BEQ</td><td>DOCR</td><td class=comment></td></tr>
<tr><td align=right>0792</td><td></td><td nowrap>FE9B &nbsp;8A</td><td></td><td class=label></td><td>TXA</td><td></td><td class=comment>// No, then output character</td></tr>
<tr><td align=right>0793</td><td></td><td nowrap>FE9C &nbsp;91 0A</td><td></td><td class=label></td><td>STA</td><td>(ICURS),Y</td><td class=comment></td></tr>
<tr><td align=right>0794</td><td></td><td nowrap>FE9E &nbsp;C8</td><td></td><td class=label></td><td>INY</td><td></td><td class=comment>// Increment vdu index</td></tr>
<tr><td align=right>0795</td><td></td><td nowrap>FE9F &nbsp;C0 20</td><td></td><td class=label></td><td>CPY</td><td>#32</td><td class=comment>// End of line?</td></tr>
<tr><td align=right>0796</td><td></td><td nowrap>FEA1 &nbsp;30 E9</td><td></td><td class=label></td><td>BMI</td><td>DODEL</td><td class=comment>// No - then tidy up and exit</td></tr>
<tr><td align=right>0797</td><td></td><td nowrap>FEA3 &nbsp;A2 00</td><td></td><td class=label>DOCR:</td><td>LDX</td><td>#0</td><td class=comment>// Scroll line</td></tr>
<tr><td align=right>0798</td><td></td><td nowrap>FEA5 &nbsp;BD 20 02</td><td></td><td class=label>LOWBLK:</td><td>LDA</td><td>VDUFST,X</td><td class=comment>// Do in two blocks</td></tr>
<tr><td align=right>0799</td><td></td><td nowrap>FEA8 &nbsp;9D 00 02</td><td></td><td class=label></td><td>STA</td><td>VDUSTT,X</td><td class=comment></td></tr>
<tr><td align=right>0800</td><td></td><td nowrap>FEAB &nbsp;E8</td><td></td><td class=label></td><td>INX</td><td></td><td class=comment></td></tr>
<tr><td align=right>0801</td><td></td><td nowrap>FEAC &nbsp;D0 F7</td><td></td><td class=label></td><td>BNE</td><td>LOWBLK</td><td class=comment></td></tr>
<tr><td align=right>0802</td><td></td><td nowrap>FEAE &nbsp;BD 20 03</td><td></td><td class=label>HIBLK:</td><td>LDA</td><td>VDUTOP,X</td><td class=comment></td></tr>
<tr><td align=right>0803</td><td></td><td nowrap>FEB1 &nbsp;9D 00 03</td><td></td><td class=label></td><td>STA</td><td>VDUMID,X</td><td class=comment></td></tr>
<tr><td align=right>0804</td><td></td><td nowrap>FEB4 &nbsp;E8</td><td></td><td class=label></td><td>INX</td><td></td><td class=comment></td></tr>
<tr><td align=right>0805</td><td></td><td nowrap>FEB5 &nbsp;E0 E0</td><td></td><td class=label></td><td>CPX</td><td>#$E0</td><td class=comment></td></tr>
<tr><td align=right>0806</td><td></td><td nowrap>FEB7 &nbsp;D0 F5</td><td></td><td class=label></td><td>BNE</td><td>HIBLK</td><td class=comment></td></tr>
<tr><td align=right>0807</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0808</td><td></td><td nowrap>FEB9 &nbsp;A9 20</td><td></td><td class=label></td><td>LDA</td><td>#$20</td><td class=comment></td></tr>
<tr><td align=right>0809</td><td></td><td nowrap>FEBB &nbsp;A8</td><td></td><td class=label></td><td>TAY</td><td></td><td class=comment></td></tr>
<tr><td align=right>0810</td><td></td><td nowrap>FEBC &nbsp;88</td><td></td><td class=label>MORSP:</td><td>DEY</td><td></td><td class=comment>// Fill line with spaces</td></tr>
<tr><td align=right>0811</td><td></td><td nowrap>FEBD &nbsp;91 0A</td><td></td><td class=label></td><td>STA</td><td>(ICURS),Y</td><td class=comment></td></tr>
<tr><td align=right>0812</td><td></td><td nowrap>FEBF &nbsp;D0 FB</td><td></td><td class=label></td><td>BNE</td><td>MORSP</td><td class=comment></td></tr>
<tr><td align=right>0813</td><td></td><td nowrap>FEC1 &nbsp;F0 C7</td><td></td><td class=label></td><td>BEQ</td><td>ZERCUR</td><td class=comment>// When done, tidy up</td></tr>
<tr><td align=right>0814</td><td></td><td></td><td></td><td class=hashdirective>#endif</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>0815</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0816</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0817</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0818</td><td></td><td></td><td></td><td colspan=4 class=comment>// KEYBOARD INTERRUPT</td></tr>
<tr><td align=right>0819</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0820</td><td></td><td></td><td></td><td colspan=4 class=comment>// Note this is entered via jump instruction stored in RAM location INTFS1</td></tr>
<tr><td align=right>0821</td><td></td><td></td><td></td><td colspan=4 class=comment>// so that user can access interrupts quickly.</td></tr>
<tr><td align=right>0822</td><td></td><td></td><td></td><td colspan=4 class=comment>// A reset will always initiate INTFS1</td></tr>
<tr><td align=right>0823</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0824</td><td></td><td nowrap>FEC3 &nbsp;48</td><td></td><td class=label>KBINT:</td><td>PHA</td><td></td><td class=comment>// Save accumulator</td></tr>
<tr><td align=right>0825</td><td></td><td nowrap>FEC4 &nbsp;D8</td><td></td><td class=label></td><td>CLD</td><td></td><td class=comment>// Set binary mode</td></tr>
<tr><td align=right>0826</td><td></td><td nowrap>FEC5 &nbsp;8A</td><td></td><td class=label></td><td>TXA</td><td></td><td class=comment>// Save IX</td></tr>
<tr><td align=right>0827</td><td></td><td nowrap>FEC6 &nbsp;48</td><td></td><td class=label></td><td>PHA</td><td></td><td class=comment></td></tr>
<tr><td align=right>0828</td><td></td><td nowrap>FEC7 &nbsp;BA</td><td></td><td class=label></td><td>TSX</td><td></td><td class=comment>// Get SP in IX</td></tr>
<tr><td align=right>0829</td><td></td><td nowrap>FEC8 &nbsp;E8</td><td></td><td class=label></td><td>INX</td><td></td><td class=comment>// Point IX to old PSW</td></tr>
<tr><td align=right>0830</td><td></td><td nowrap>FEC9 &nbsp;E8</td><td></td><td class=label></td><td>INX</td><td></td><td class=comment></td></tr>
<tr><td align=right>0831</td><td></td><td nowrap>FECA &nbsp;E8</td><td></td><td class=label></td><td>INX</td><td></td><td class=comment></td></tr>
<tr><td align=right>0832</td><td></td><td nowrap>FECB &nbsp;BD 00 01</td><td></td><td class=label></td><td>LDA</td><td>STKBSE,X</td><td class=comment>// and get the PSW</td></tr>
<tr><td align=right>0833</td><td></td><td nowrap>FECE &nbsp;29 10</td><td></td><td class=label></td><td>AND</td><td>#$10</td><td class=comment>// Was it a break? </td></tr>
<tr><td align=right>0834</td><td></td><td nowrap>FED0 &nbsp;D0 1E</td><td></td><td class=label></td><td>BNE</td><td>BRKP</td><td class=comment>// Yes - then process it</td></tr>
<tr><td align=right>0835</td><td></td><td nowrap>FED2 &nbsp;68</td><td></td><td class=label></td><td>PLA</td><td></td><td class=comment>// Else restore IX</td></tr>
<tr><td align=right>0836</td><td></td><td nowrap>FED3 &nbsp;AA</td><td></td><td class=label></td><td>TAX</td><td></td><td class=comment></td></tr>
<tr><td align=right>0837</td><td></td><td></td><td></td><td class=hashdirective>#if</td><td colspan=2 class=hashdirective>TANEX</td><td class=comment></td></tr>
<tr><td align=right>0838</td><td></td><td nowrap></td><td></td><td class=label></td><td>JSR</td><td>$FAA3</td><td class=comment></td></tr>
<tr><td align=right>0839</td><td></td><td></td><td></td><td class=hashdirective>#else</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>0840</td><td></td><td nowrap>FED4 &nbsp;AD F3 BF</td><td></td><td class=label></td><td>LDA</td><td>KBREAD</td><td class=comment>// Read keyboard</td></tr>
<tr><td align=right>0841</td><td></td><td></td><td></td><td class=hashdirective>#endif</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>0842</td><td></td><td nowrap>FED7 &nbsp;30 04</td><td></td><td class=label></td><td>BMI</td><td>WASKB</td><td class=comment>// If -ve, then was keyboard</td></tr>
<tr><td align=right>0843</td><td></td><td nowrap>FED9 &nbsp;68</td><td></td><td class=label>USER:</td><td>PLA</td><td></td><td class=comment>// Else restore A</td></tr>
<tr><td align=right>0844</td><td></td><td nowrap>FEDA &nbsp;4C 10 00</td><td></td><td class=label></td><td>JMP</td><td>INTSL1</td><td class=comment>// and check the slow interrupt</td></tr>
<tr><td align=right>0845</td><td></td><td nowrap></td><td></td><td class=label></td><td></td><td></td><td class=comment></td></tr>
<tr><td align=right>0846</td><td></td><td nowrap></td><td></td><td class=label></td><td></td><td></td><td class=comment></td></tr>
<tr><td align=right>0847</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0848</td><td></td><td nowrap>FEDD &nbsp;29 7F</td><td></td><td class=label>WASKB:</td><td>AND</td><td>#$7F</td><td class=comment>// Mask top bit</td></tr>
<tr><td align=right>0849</td><td></td><td nowrap>FEDF &nbsp;85 01</td><td></td><td class=label></td><td>STA</td><td>ICHAR</td><td class=comment>// and store in ICHAR</td></tr>
<tr><td align=right>0850</td><td></td><td></td><td></td><td class=hashdirective>#if</td><td colspan=2 class=hashdirective>TANEX</td><td class=comment></td></tr>
<tr><td align=right>0851</td><td></td><td nowrap></td><td></td><td class=label></td><td>JSR</td><td>$F911</td><td class=comment></td></tr>
<tr><td align=right>0852</td><td></td><td></td><td></td><td class=hashdirective>#else</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>0853</td><td></td><td nowrap>FEE1 &nbsp;8D F0 BF</td><td></td><td class=label></td><td>STA</td><td>KBINCL</td><td class=comment>// Clear keyboard interrupt flip-flop</td></tr>
<tr><td align=right>0854</td><td></td><td></td><td></td><td class=hashdirective>#endif</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>0855</td><td></td><td nowrap>FEE4 &nbsp;C9 1B</td><td></td><td class=label></td><td>CMP</td><td>#$1B</td><td class=comment>// Was key ESC?</td></tr>
<tr><td align=right>0856</td><td></td><td nowrap>FEE6 &nbsp;D0 F1</td><td></td><td class=label></td><td>BNE</td><td>USER</td><td class=comment>// No - then normal return</td></tr>
<tr><td align=right>0857</td><td></td><td nowrap>FEE8 &nbsp;A5 0C</td><td></td><td class=label></td><td>LDA</td><td>RUNIND</td><td class=comment>// Else - check if user program running?</td></tr>
<tr><td align=right>0858</td><td></td><td nowrap>FEEA &nbsp;D0 ED</td><td></td><td class=label></td><td>BNE</td><td>USER</td><td class=comment>// No - then normal return</td></tr>
<tr><td align=right>0859</td><td></td><td nowrap>FEEC &nbsp;85 0E</td><td></td><td class=label></td><td>STA</td><td>PROCED</td><td class=comment>// Else clear proceed count</td></tr>
<tr><td align=right>0860</td><td></td><td nowrap>FEEE &nbsp;F0 12</td><td></td><td class=label></td><td>BEQ</td><td>ACTBP</td><td class=comment>// and unconditionally branch to break</td></tr>
<tr><td align=right>0861</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0862</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0863</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0864</td><td></td><td></td><td></td><td colspan=4 class=comment>// BREAK PROCESSING</td></tr>
<tr><td align=right>0865</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0866</td><td></td><td></td><td></td><td colspan=4 class=comment>// Note the user should not set a break at own break or in this interrupt routine</td></tr>
<tr><td align=right>0867</td><td></td><td></td><td></td><td colspan=4 class=comment>// else crashes. Adjust PC to return to instr must subtract 3</td></tr>
<tr><td align=right>0868</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0869</td><td></td><td nowrap>FEF0 &nbsp;E8</td><td></td><td class=label>BRKP:</td><td>INX</td><td></td><td class=comment>// address PC L</td></tr>
<tr><td align=right>0870</td><td></td><td nowrap>FEF1 &nbsp;38</td><td></td><td class=label></td><td>SEC</td><td></td><td class=comment>// set C</td></tr>
<tr><td align=right>0871</td><td></td><td nowrap>FEF2 &nbsp;BD 00 01</td><td></td><td class=label></td><td>LDA</td><td>STKBSE,X</td><td class=comment>// get PCL</td></tr>
<tr><td align=right>0872</td><td></td><td nowrap>FEF5 &nbsp;E9 02</td><td></td><td class=label></td><td>SBC</td><td>#2</td><td class=comment>// subtract 3</td></tr>
<tr><td align=right>0873</td><td></td><td nowrap>FEF7 &nbsp;9D 00 01</td><td></td><td class=label></td><td>STA</td><td>STKBSE,X</td><td class=comment>// put it back</td></tr>
<tr><td align=right>0874</td><td></td><td nowrap>FEFA &nbsp;B0 04</td><td></td><td class=label></td><td>BCS</td><td>NOROLL</td><td class=comment>// C set? NOHI byte</td></tr>
<tr><td align=right>0875</td><td></td><td nowrap>FEFC &nbsp;E8</td><td></td><td class=label></td><td>INX</td><td></td><td class=comment>// else address PCH</td></tr>
<tr><td align=right>0876</td><td></td><td nowrap>FEFD &nbsp;DE 00 01</td><td></td><td class=label></td><td>DEC</td><td>STKBSE,X</td><td class=comment>// dec PCH</td></tr>
<tr><td align=right>0877</td><td></td><td nowrap>FF00 &nbsp;68</td><td></td><td class=label>NOROLL:</td><td>PLA</td><td></td><td class=comment>// pull IX</td></tr>
<tr><td align=right>0878</td><td></td><td nowrap>FF01 &nbsp;AA</td><td></td><td class=label></td><td>TAX</td><td></td><td class=comment>// restore it</td></tr>
<tr><td align=right>0879</td><td></td><td nowrap>FF02 &nbsp;68</td><td></td><td class=label>ACTBP:</td><td>PLA</td><td></td><td class=comment>// pull accumulator</td></tr>
<tr><td align=right>0880</td><td></td><td nowrap>FF03 &nbsp;85 1B</td><td></td><td class=label></td><td>STA</td><td>ABCK</td><td class=comment>// back it up</td></tr>
<tr><td align=right>0881</td><td></td><td nowrap>FF05 &nbsp;20 C1 FF</td><td></td><td class=label></td><td>JSR</td><td>BPTREM</td><td class=comment>// restore user code</td></tr>
<tr><td align=right>0882</td><td></td><td nowrap>FF08 &nbsp;4C 75 FF</td><td></td><td class=label>NOROL:</td><td>JMP</td><td>NMNT1</td><td class=comment>// service break</td></tr>
<tr><td align=right>0883</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0884</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0885</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0886</td><td></td><td></td><td></td><td colspan=4 class=comment>// DISPLAY HEX VALUES</td></tr>
<tr><td align=right>0887</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0888</td><td></td><td></td><td></td><td colspan=4 class=comment>// Takes a hex value stored in accumulator and displays as two hex characters</td></tr>
<tr><td align=right>0889</td><td></td><td></td><td></td><td colspan=4 class=comment>// Registers ACC and IX are corrupted</td></tr>
<tr><td align=right>0890</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0891</td><td></td><td nowrap>FF0B &nbsp;48</td><td></td><td class=label>HEXPNT:</td><td>PHA</td><td></td><td class=comment>// Save value of char</td></tr>
<tr><td align=right>0892</td><td></td><td nowrap>FF0C &nbsp;A2 01</td><td></td><td class=label></td><td>LDX</td><td>#1</td><td class=comment></td></tr>
<tr><td align=right>0893</td><td></td><td nowrap>FF0E &nbsp;4A</td><td></td><td class=label></td><td>LSR</td><td>A</td><td class=comment>// Get top part by multiple shifts</td></tr>
<tr><td align=right>0894</td><td></td><td nowrap>FF0F &nbsp;4A</td><td></td><td class=label></td><td>LSR</td><td>A</td><td class=comment></td></tr>
<tr><td align=right>0895</td><td></td><td nowrap>FF10 &nbsp;4A</td><td></td><td class=label></td><td>LSR</td><td>A</td><td class=comment></td></tr>
<tr><td align=right>0896</td><td></td><td nowrap>FF11 &nbsp;4A</td><td></td><td class=label></td><td>LSR</td><td>A</td><td class=comment></td></tr>
<tr><td align=right>0897</td><td></td><td nowrap>FF12 &nbsp;18</td><td></td><td class=label>PNT2:</td><td>CLC</td><td></td><td class=comment></td></tr>
<tr><td align=right>0898</td><td></td><td nowrap>FF13 &nbsp;69 30</td><td></td><td class=label></td><td>ADC</td><td>#$30</td><td class=comment>// Add hex 30</td></tr>
<tr><td align=right>0899</td><td></td><td nowrap>FF15 &nbsp;C9 3A</td><td></td><td class=label></td><td>CMP</td><td>#$3A</td><td class=comment>// More than 9?</td></tr>
<tr><td align=right>0900</td><td></td><td nowrap>FF17 &nbsp;30 03</td><td></td><td class=label></td><td>BMI</td><td>PNT1</td><td class=comment>// No - then display it</td></tr>
<tr><td align=right>0901</td><td></td><td nowrap>FF19 &nbsp;18</td><td></td><td class=label></td><td>CLC</td><td></td><td class=comment></td></tr>
<tr><td align=right>0902</td><td></td><td nowrap>FF1A &nbsp;69 07</td><td></td><td class=label></td><td>ADC</td><td>#7</td><td class=comment>// Adjust again</td></tr>
<tr><td align=right>0903</td><td></td><td nowrap>FF1C &nbsp;20 75 FE</td><td></td><td class=label>PNT1:</td><td>JSR</td><td>OPCHR</td><td class=comment>// and display it</td></tr>
<tr><td align=right>0904</td><td></td><td nowrap>FF1F &nbsp;CA</td><td></td><td class=label></td><td>DEX</td><td></td><td class=comment></td></tr>
<tr><td align=right>0905</td><td></td><td nowrap>FF20 &nbsp;10 01</td><td></td><td class=label></td><td>BPL</td><td>MOR1</td><td class=comment>// -ve? - end else low bit</td></tr>
<tr><td align=right>0906</td><td></td><td nowrap>FF22 &nbsp;60</td><td></td><td class=label></td><td>RTS</td><td></td><td class=comment></td></tr>
<tr><td align=right>0907</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0908</td><td></td><td nowrap>FF23 &nbsp;68</td><td></td><td class=label>MOR1:</td><td>PLA</td><td></td><td class=comment>// Recover character</td></tr>
<tr><td align=right>0909</td><td></td><td nowrap>FF24 &nbsp;29 0F</td><td></td><td class=label></td><td>AND</td><td>#$0F</td><td class=comment>// Clear unwanted bits</td></tr>
<tr><td align=right>0910</td><td></td><td nowrap>FF26 &nbsp;10 EA</td><td></td><td class=label></td><td>BPL</td><td>PNT2</td><td class=comment>// and branch unconditionally</td></tr>
<tr><td align=right>0911</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0912</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0913</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0914</td><td></td><td></td><td></td><td colspan=4 class=comment>// PACK HEX CHARACTERS</td></tr>
<tr><td align=right>0915</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0916</td><td></td><td></td><td></td><td colspan=4 class=comment>// This subroutine reads hex characters from the bottom line of the display</td></tr>
<tr><td align=right>0917</td><td></td><td></td><td></td><td colspan=4 class=comment>// and packs them up into two eight bit binary values.</td></tr>
<tr><td align=right>0918</td><td></td><td></td><td></td><td colspan=4 class=comment>// On exit, caused by any non-hex character, HXPKL and HXPKH contain a two</td></tr>
<tr><td align=right>0919</td><td></td><td></td><td></td><td colspan=4 class=comment>// byte number.</td></tr>
<tr><td align=right>0920</td><td></td><td></td><td></td><td colspan=4 class=comment>// Registers are not saved. On exit IY points to the last character. The zero flag</td></tr>
<tr><td align=right>0921</td><td></td><td></td><td></td><td colspan=4 class=comment>// is clear if the terminating character was the cursor, else set. The overflow</td></tr>
<tr><td align=right>0922</td><td></td><td></td><td></td><td colspan=4 class=comment>// flag is set if this subroutine encountered some hex data. </td></tr>
<tr><td align=right>0923</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0924</td><td></td><td nowrap>FF28 &nbsp;A9 00</td><td></td><td class=label>HEXPCK:</td><td>LDA</td><td>#0</td><td class=comment>// Clear accumulator</td></tr>
<tr><td align=right>0925</td><td></td><td nowrap>FF2A &nbsp;48</td><td></td><td class=label></td><td>PHA</td><td></td><td class=comment>// Push as PSW</td></tr>
<tr><td align=right>0926</td><td></td><td nowrap>FF2B &nbsp;85 13</td><td></td><td class=label></td><td>STA</td><td>HXPKL</td><td class=comment>// Clear parameters</td></tr>
<tr><td align=right>0927</td><td></td><td nowrap>FF2D &nbsp;85 14</td><td></td><td class=label></td><td>STA</td><td>HXPKH</td><td class=comment></td></tr>
<tr><td align=right>0928</td><td></td><td nowrap>FF2F &nbsp;C8</td><td></td><td class=label>NXHX:</td><td>INY</td><td></td><td class=comment></td></tr>
<tr><td align=right>0929</td><td></td><td nowrap>FF30 &nbsp;B1 0A</td><td></td><td class=label></td><td>LDA</td><td>(ICURS),Y</td><td class=comment>// Get character from display</td></tr>
<tr><td align=right>0930</td><td></td><td nowrap>FF32 &nbsp;AA</td><td></td><td class=label></td><td>TAX</td><td></td><td class=comment>// Save in IX</td></tr>
<tr><td align=right>0931</td><td></td><td nowrap>FF33 &nbsp;38</td><td></td><td class=label></td><td>SEC</td><td></td><td class=comment></td></tr>
<tr><td align=right>0932</td><td></td><td nowrap>FF34 &nbsp;E9 30</td><td></td><td class=label></td><td>SBC</td><td>#$30</td><td class=comment>// Subtract hex 30 to give 0 to 9</td></tr>
<tr><td align=right>0933</td><td></td><td nowrap>FF36 &nbsp;30 10</td><td></td><td class=label></td><td>BMI</td><td>ENDTS</td><td class=comment></td></tr>
<tr><td align=right>0934</td><td></td><td nowrap>FF38 &nbsp;C9 0A</td><td></td><td class=label>HX1:</td><td>CMP</td><td>#$0A</td><td class=comment>// Is it 0 to 9?</td></tr>
<tr><td align=right>0935</td><td></td><td nowrap>FF3A &nbsp;30 10</td><td></td><td class=label></td><td>BMI</td><td>HX2</td><td class=comment>// Yes - then pack it</td></tr>
<tr><td align=right>0936</td><td></td><td nowrap>FF3C &nbsp;38</td><td></td><td class=label></td><td>SEC</td><td></td><td class=comment>// Else adjust by hex 11</td></tr>
<tr><td align=right>0937</td><td></td><td nowrap>FF3D &nbsp;E9 11</td><td></td><td class=label></td><td>SBC</td><td>#$11</td><td class=comment></td></tr>
<tr><td align=right>0938</td><td></td><td nowrap>FF3F &nbsp;30 07</td><td></td><td class=label></td><td>BMI</td><td>ENDTS</td><td class=comment>// Goto carry setup</td></tr>
<tr><td align=right>0939</td><td></td><td nowrap>FF41 &nbsp;18</td><td></td><td class=label>HX3:</td><td>CLC</td><td></td><td class=comment>// Else add 9</td></tr>
<tr><td align=right>0940</td><td></td><td nowrap>FF42 &nbsp;69 0A</td><td></td><td class=label></td><td>ADC</td><td>#$0A</td><td class=comment></td></tr>
<tr><td align=right>0941</td><td></td><td nowrap>FF44 &nbsp;C9 10</td><td></td><td class=label></td><td>CMP</td><td>#$10</td><td class=comment>// If more than 15, then exit</td></tr>
<tr><td align=right>0942</td><td></td><td nowrap>FF46 &nbsp;30 04</td><td></td><td class=label></td><td>BMI</td><td>HX2</td><td class=comment></td></tr>
<tr><td align=right>0943</td><td></td><td nowrap>FF48 &nbsp;28</td><td></td><td class=label>ENDTS:</td><td>PLP</td><td></td><td class=comment>// Deal with V flag</td></tr>
<tr><td align=right>0944</td><td></td><td nowrap>FF49 &nbsp;E0 FF</td><td></td><td class=label></td><td>CPX</td><td>#$FF</td><td class=comment>// Check if cursor</td></tr>
<tr><td align=right>0945</td><td></td><td nowrap>FF4B &nbsp;60</td><td></td><td class=label></td><td>RTS</td><td></td><td class=comment></td></tr>
<tr><td align=right>0946</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0947</td><td></td><td></td><td></td><td colspan=4 class=comment>// Note character is in IX on exit, return does not affect zero flag</td></tr>
<tr><td align=right>0948</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0949</td><td></td><td nowrap>FF4C &nbsp;A2 04</td><td></td><td class=label>HX2:</td><td>LDX</td><td>#4</td><td class=comment></td></tr>
<tr><td align=right>0950</td><td></td><td nowrap>FF4E &nbsp;06 14</td><td></td><td class=label>HX5:</td><td>ASL</td><td>HXPKH</td><td class=comment>// Shift result left 4 bits</td></tr>
<tr><td align=right>0951</td><td></td><td nowrap>FF50 &nbsp;06 13</td><td></td><td class=label></td><td>ASL</td><td>HXPKL</td><td class=comment></td></tr>
<tr><td align=right>0952</td><td></td><td nowrap>FF52 &nbsp;90 02</td><td></td><td class=label></td><td>BCC</td><td>HX4</td><td class=comment></td></tr>
<tr><td align=right>0953</td><td></td><td nowrap>FF54 &nbsp;E6 14</td><td></td><td class=label></td><td>INC</td><td>HXPKH</td><td class=comment></td></tr>
<tr><td align=right>0954</td><td></td><td nowrap>FF56 &nbsp;CA</td><td></td><td class=label>HX4:</td><td>DEX</td><td></td><td class=comment>// Until IX zero (4 times)</td></tr>
<tr><td align=right>0955</td><td></td><td nowrap>FF57 &nbsp;D0 F5</td><td></td><td class=label></td><td>BNE</td><td>HX5</td><td class=comment></td></tr>
<tr><td align=right>0956</td><td></td><td nowrap>FF59 &nbsp;18</td><td></td><td class=label></td><td>CLC</td><td></td><td class=comment></td></tr>
<tr><td align=right>0957</td><td></td><td nowrap>FF5A &nbsp;65 13</td><td></td><td class=label></td><td>ADC</td><td>HXPKL</td><td class=comment>// Add in character</td></tr>
<tr><td align=right>0958</td><td></td><td nowrap>FF5C &nbsp;85 13</td><td></td><td class=label></td><td>STA</td><td>HXPKL</td><td class=comment></td></tr>
<tr><td align=right>0959</td><td></td><td nowrap>FF5E &nbsp;68</td><td></td><td class=label></td><td>PLA</td><td></td><td class=comment>// Get pseudo PSW</td></tr>
<tr><td align=right>0960</td><td></td><td nowrap>FF5F &nbsp;A9 40</td><td></td><td class=label></td><td>LDA</td><td>#$40</td><td class=comment>// Set V bit</td></tr>
<tr><td align=right>0961</td><td></td><td nowrap>FF61 &nbsp;48</td><td></td><td class=label></td><td>PHA</td><td></td><td class=comment>// and push it</td></tr>
<tr><td align=right>0962</td><td></td><td nowrap>FF62 &nbsp;D0 CB</td><td></td><td class=label></td><td>BNE</td><td>NXHX</td><td class=comment>// Next ...</td></tr>
<tr><td align=right>0963</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0964</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0965</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0966</td><td></td><td></td><td></td><td colspan=4 class=comment>// NON-MASKABLE INTERRUPT</td></tr>
<tr><td align=right>0967</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>0968</td><td></td><td></td><td></td><td colspan=4 class=comment>// This routine handles single instruction mode</td></tr>
<tr><td align=right>0969</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0970</td><td></td><td nowrap>FF64 &nbsp;85 1B</td><td></td><td class=label>NMNT:</td><td>STA</td><td>ABCK</td><td class=comment>// Save accumulator</td></tr>
<tr><td align=right>0971</td><td></td><td nowrap>FF66 &nbsp;D8</td><td></td><td class=label></td><td>CLD</td><td></td><td class=comment>// Set binary mode</td></tr>
<tr><td align=right>0972</td><td></td><td nowrap>FF67 &nbsp;A5 0D</td><td></td><td class=label></td><td>LDA</td><td>SINGLE</td><td class=comment>// Test single instruction mode</td></tr>
<tr><td align=right>0973</td><td></td><td nowrap>FF69 &nbsp;D0 0A</td><td></td><td class=label></td><td>BNE</td><td>NMNT1</td><td class=comment></td></tr>
<tr><td align=right>0974</td><td></td><td nowrap>FF6B &nbsp;8A</td><td></td><td class=label></td><td>TXA</td><td></td><td class=comment>// If not save IX</td></tr>
<tr><td align=right>0975</td><td></td><td nowrap>FF6C &nbsp;48</td><td></td><td class=label></td><td>PHA</td><td></td><td class=comment></td></tr>
<tr><td align=right>0976</td><td></td><td nowrap>FF6D &nbsp;20 D0 FF</td><td></td><td class=label></td><td>JSR</td><td>BPSET</td><td class=comment>// Set breakpoints</td></tr>
<tr><td align=right>0977</td><td></td><td nowrap>FF70 &nbsp;68</td><td></td><td class=label></td><td>PLA</td><td></td><td class=comment>// Restore IX</td></tr>
<tr><td align=right>0978</td><td></td><td nowrap>FF71 &nbsp;AA</td><td></td><td class=label></td><td>TAX</td><td></td><td class=comment></td></tr>
<tr><td align=right>0979</td><td></td><td nowrap>FF72 &nbsp;A5 1B</td><td></td><td class=label></td><td>LDA</td><td>ABCK</td><td class=comment>// Restore accumulator</td></tr>
<tr><td align=right>0980</td><td></td><td nowrap>FF74 &nbsp;40</td><td></td><td class=label></td><td>RTI</td><td></td><td class=comment></td></tr>
<tr><td align=right>0981</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0982</td><td></td><td nowrap>FF75 &nbsp;A5 0E</td><td></td><td class=label>NMNT1:</td><td>LDA</td><td>PROCED</td><td class=comment>// Get proceed count</td></tr>
<tr><td align=right>0983</td><td></td><td nowrap>FF77 &nbsp;F0 05</td><td></td><td class=label></td><td>BEQ</td><td>ZERBCK</td><td class=comment>// If zero, then break</td></tr>
<tr><td align=right>0984</td><td></td><td nowrap>FF79 &nbsp;C6 0E</td><td></td><td class=label></td><td>DEC</td><td>PROCED</td><td class=comment>// else decrement count</td></tr>
<tr><td align=right>0985</td><td></td><td nowrap>FF7B &nbsp;4C B9 FC</td><td></td><td class=label></td><td>JMP</td><td>SRET</td><td class=comment>// RTS via single test</td></tr>
<tr><td align=right>0986</td><td></td><td colspan=4></td></tr>
<tr><td align=right>0987</td><td></td><td nowrap>FF7E &nbsp;E6 0C</td><td></td><td class=label>ZERBCK:</td><td>INC</td><td>RUNIND</td><td class=comment>// Set not running</td></tr>
<tr><td align=right>0988</td><td></td><td nowrap>FF80 &nbsp;68</td><td></td><td class=label></td><td>PLA</td><td></td><td class=comment>// Pop breakpoint PSW to Acc</td></tr>
<tr><td align=right>0989</td><td></td><td nowrap>FF81 &nbsp;85 17</td><td></td><td class=label></td><td>STA</td><td>PSWBCK</td><td class=comment>// and back it up</td></tr>
<tr><td align=right>0990</td><td></td><td nowrap>FF83 &nbsp;68</td><td></td><td class=label></td><td>PLA</td><td></td><td class=comment></td></tr>
<tr><td align=right>0991</td><td></td><td nowrap>FF84 &nbsp;85 15</td><td></td><td class=label></td><td>STA</td><td>PCLBCK</td><td class=comment>// Ditto PCL</td></tr>
<tr><td align=right>0992</td><td></td><td nowrap>FF86 &nbsp;68</td><td></td><td class=label></td><td>PLA</td><td></td><td class=comment></td></tr>
<tr><td align=right>0993</td><td></td><td nowrap>FF87 &nbsp;85 16</td><td></td><td class=label></td><td>STA</td><td>PCHBCK</td><td class=comment>// Ditto PCH</td></tr>
<tr><td align=right>0994</td><td></td><td nowrap>FF89 &nbsp;86 19</td><td></td><td class=label></td><td>STX</td><td>XBCK</td><td class=comment>// Save IX</td></tr>
<tr><td align=right>0995</td><td></td><td nowrap>FF8B &nbsp;84 1A</td><td></td><td class=label></td><td>STY</td><td>YBCK</td><td class=comment>// and IY</td></tr>
<tr><td align=right>0996</td><td></td><td nowrap>FF8D &nbsp;BA</td><td></td><td class=label></td><td>TSX</td><td></td><td class=comment></td></tr>
<tr><td align=right>0997</td><td></td><td nowrap>FF8E &nbsp;86 18</td><td></td><td class=label></td><td>STX</td><td>SPBCK</td><td class=comment>// and operators SP</td></tr>
<tr><td align=right>0998</td><td></td><td nowrap>FF90 &nbsp;20 73 FE</td><td></td><td class=label>PSEUD:</td><td>JSR</td><td>OUTPCR</td><td class=comment></td></tr>
<tr><td align=right>0999</td><td></td><td nowrap>FF93 &nbsp;A5 16</td><td></td><td class=label></td><td>LDA</td><td>PCHBCK</td><td class=comment></td></tr>
<tr><td align=right>1000</td><td></td><td nowrap>FF95 &nbsp;20 0B FF</td><td></td><td class=label></td><td>JSR</td><td>HEXPNT</td><td class=comment>// Display PC</td></tr>
<tr><td align=right>1001</td><td></td><td nowrap>FF98 &nbsp;A5 15</td><td></td><td class=label></td><td>LDA</td><td>PCLBCK</td><td class=comment></td></tr>
<tr><td align=right>1002</td><td></td><td nowrap>FF9A &nbsp;20 0B FF</td><td></td><td class=label></td><td>JSR</td><td>HEXPNT</td><td class=comment></td></tr>
<tr><td align=right>1003</td><td></td><td nowrap>FF9D &nbsp;A0 00</td><td></td><td class=label></td><td>LDY</td><td>#0</td><td class=comment></td></tr>
<tr><td align=right>1004</td><td></td><td nowrap>FF9F &nbsp;A9 20</td><td></td><td class=label>PSNX:</td><td>LDA</td><td>#$20</td><td class=comment>// Display two spaces</td></tr>
<tr><td align=right>1005</td><td></td><td nowrap>FFA1 &nbsp;48</td><td></td><td class=label></td><td>PHA</td><td></td><td class=comment></td></tr>
<tr><td align=right>1006</td><td></td><td nowrap>FFA2 &nbsp;20 75 FE</td><td></td><td class=label></td><td>JSR</td><td>OPCHR</td><td class=comment></td></tr>
<tr><td align=right>1007</td><td></td><td nowrap>FFA5 &nbsp;68</td><td></td><td class=label></td><td>PLA</td><td></td><td class=comment></td></tr>
<tr><td align=right>1008</td><td></td><td nowrap>FFA6 &nbsp;20 75 FE</td><td></td><td class=label></td><td>JSR</td><td>OPCHR</td><td class=comment></td></tr>
<tr><td align=right>1009</td><td></td><td nowrap>FFA9 &nbsp;B9 17 00</td><td></td><td class=label></td><td>LDA</td><td>PSWBCK,Y</td><td class=comment>// Then display all registers</td></tr>
<tr><td align=right>1010</td><td></td><td nowrap>FFAC &nbsp;20 0B FF</td><td></td><td class=label></td><td>JSR</td><td>HEXPNT</td><td class=comment></td></tr>
<tr><td align=right>1011</td><td></td><td nowrap>FFAF &nbsp;C8</td><td></td><td class=label></td><td>INY</td><td></td><td class=comment></td></tr>
<tr><td align=right>1012</td><td></td><td nowrap>FFB0 &nbsp;C0 05</td><td></td><td class=label></td><td>CPY</td><td>#5</td><td class=comment></td></tr>
<tr><td align=right>1013</td><td></td><td nowrap>FFB2 &nbsp;30 EB</td><td></td><td class=label></td><td>BMI</td><td>PSNX</td><td class=comment></td></tr>
<tr><td align=right>1014</td><td></td><td nowrap>FFB4 &nbsp;4C 4B FC</td><td></td><td class=label></td><td>JMP</td><td>RC1</td><td class=comment></td></tr>
<tr><td align=right>1015</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1016</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1017</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1018</td><td></td><td></td><td></td><td colspan=4 class=comment>// CLEAR BREAKPOINTS</td></tr>
<tr><td align=right>1019</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>1020</td><td></td><td></td><td></td><td colspan=4 class=comment>// Sets all breakpoint addresses to zero</td></tr>
<tr><td align=right>1021</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1022</td><td></td><td nowrap>FFB7 &nbsp;A2 1F</td><td></td><td class=label>BPTCLR:</td><td>LDX</td><td>#$1F</td><td class=comment>// Set count for 8 breakpoints</td></tr>
<tr><td align=right>1023</td><td></td><td nowrap>FFB9 &nbsp;A9 00</td><td></td><td class=label></td><td>LDA</td><td>#0</td><td class=comment></td></tr>
<tr><td align=right>1024</td><td></td><td nowrap>FFBB &nbsp;95 20</td><td></td><td class=label>BPTCL1:</td><td>STA</td><td>BPTLO,X</td><td class=comment>// Set to zero</td></tr>
<tr><td align=right>1025</td><td></td><td nowrap>FFBD &nbsp;CA</td><td></td><td class=label></td><td>DEX</td><td></td><td class=comment></td></tr>
<tr><td align=right>1026</td><td></td><td nowrap>FFBE &nbsp;10 FB</td><td></td><td class=label></td><td>BPL</td><td>BPTCL1</td><td class=comment>// For all locations</td></tr>
<tr><td align=right>1027</td><td></td><td nowrap>FFC0 &nbsp;60</td><td></td><td class=label></td><td>RTS</td><td></td><td class=comment></td></tr>
<tr><td align=right>1028</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1029</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1030</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1031</td><td></td><td></td><td></td><td colspan=4 class=comment>// REMOVE BREAKPOINTS</td></tr>
<tr><td align=right>1032</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>1033</td><td></td><td></td><td></td><td colspan=4 class=comment>// Writes back the user's original code</td></tr>
<tr><td align=right>1034</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1035</td><td></td><td nowrap>FFC1 &nbsp;8A</td><td></td><td class=label>BPTREM:</td><td>TXA</td><td></td><td class=comment></td></tr>
<tr><td align=right>1036</td><td></td><td nowrap>FFC2 &nbsp;48</td><td></td><td class=label></td><td>PHA</td><td></td><td class=comment></td></tr>
<tr><td align=right>1037</td><td></td><td nowrap>FFC3 &nbsp;A2 0E</td><td></td><td class=label></td><td>LDX</td><td>#$0E</td><td class=comment>// Set count for 8 breakpoints</td></tr>
<tr><td align=right>1038</td><td></td><td nowrap></td><td></td><td class=label>BPTRM1:</td><td>//</td><td></td><td class=comment></td></tr>
<tr><td align=right>1039</td><td></td><td></td><td></td><td class=hashdirective>#if</td><td colspan=2 class=hashdirective>TANEX</td><td class=comment></td></tr>
<tr><td align=right>1040</td><td></td><td nowrap></td><td></td><td class=label></td><td>LDA</td><td>BPTLO,X</td><td class=comment></td></tr>
<tr><td align=right>1041</td><td></td><td nowrap></td><td></td><td class=label></td><td>ORA</td><td>BPTHI,X</td><td class=comment></td></tr>
<tr><td align=right>1042</td><td></td><td nowrap></td><td></td><td class=label></td><td>BEQ</td><td>BPTRM2</td><td class=comment></td></tr>
<tr><td align=right>1043</td><td></td><td></td><td></td><td class=hashdirective>#endif</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>1044</td><td></td><td nowrap>FFC5 &nbsp;B5 30</td><td></td><td class=label></td><td>LDA</td><td>BPTCOD,X</td><td class=comment>// Load saved old instruction</td></tr>
<tr><td align=right>1045</td><td></td><td nowrap>FFC7 &nbsp;81 20</td><td></td><td class=label></td><td>STA</td><td>(BPTLO,X)</td><td class=comment>// Write to program memory</td></tr>
<tr><td align=right>1046</td><td></td><td nowrap>FFC9 &nbsp;CA</td><td></td><td class=label>BPTRM2:</td><td>DEX</td><td></td><td class=comment></td></tr>
<tr><td align=right>1047</td><td></td><td nowrap>FFCA &nbsp;CA</td><td></td><td class=label></td><td>DEX</td><td></td><td class=comment></td></tr>
<tr><td align=right>1048</td><td></td><td nowrap>FFCB &nbsp;10 F8</td><td></td><td class=label></td><td>BPL</td><td>BPTRM1</td><td class=comment>// For all locations</td></tr>
<tr><td align=right>1049</td><td></td><td nowrap>FFCD &nbsp;68</td><td></td><td class=label></td><td>PLA</td><td></td><td class=comment></td></tr>
<tr><td align=right>1050</td><td></td><td nowrap>FFCE &nbsp;AA</td><td></td><td class=label></td><td>TAX</td><td></td><td class=comment></td></tr>
<tr><td align=right>1051</td><td></td><td nowrap>FFCF &nbsp;60</td><td></td><td class=label></td><td>RTS</td><td></td><td class=comment></td></tr>
<tr><td align=right>1052</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1053</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1054</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1055</td><td></td><td></td><td></td><td colspan=4 class=comment>// SET BREAKPOINTS</td></tr>
<tr><td align=right>1056</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>1057</td><td></td><td></td><td></td><td colspan=4 class=comment>// Examines entered breakpoint addresses, stores the present instruction</td></tr>
<tr><td align=right>1058</td><td></td><td></td><td></td><td colspan=4 class=comment>// and writes BRK opcode to program memory</td></tr>
<tr><td align=right>1059</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1060</td><td></td><td nowrap>FFD0 &nbsp;A2 0E</td><td></td><td class=label>BPSET:</td><td>LDX</td><td>#$0E</td><td class=comment>// Set count for 8 breakpoints</td></tr>
<tr><td align=right>1061</td><td></td><td nowrap></td><td></td><td class=label>BPS1:</td><td>//</td><td></td><td class=comment></td></tr>
<tr><td align=right>1062</td><td></td><td></td><td></td><td class=hashdirective>#if</td><td colspan=2 class=hashdirective>TANEX</td><td class=comment></td></tr>
<tr><td align=right>1063</td><td></td><td nowrap></td><td></td><td class=label></td><td>LDA</td><td>BPTHI,X</td><td class=comment></td></tr>
<tr><td align=right>1064</td><td></td><td nowrap></td><td></td><td class=label></td><td>ORA</td><td>BPTLO,X</td><td class=comment></td></tr>
<tr><td align=right>1065</td><td></td><td nowrap></td><td></td><td class=label></td><td>BEQ</td><td>BPS2</td><td class=comment></td></tr>
<tr><td align=right>1066</td><td></td><td></td><td></td><td class=hashdirective>#endif</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>1067</td><td></td><td nowrap>FFD2 &nbsp;A1 20</td><td></td><td class=label></td><td>LDA</td><td>(BPTLO,X)</td><td class=comment>// Get user's instruction</td></tr>
<tr><td align=right>1068</td><td></td><td nowrap>FFD4 &nbsp;95 30</td><td></td><td class=label></td><td>STA</td><td>BPTCOD,X</td><td class=comment>// Store it</td></tr>
<tr><td align=right>1069</td><td></td><td nowrap>FFD6 &nbsp;A9 00</td><td></td><td class=label></td><td>LDA</td><td>#0</td><td class=comment></td></tr>
<tr><td align=right>1070</td><td></td><td nowrap>FFD8 &nbsp;81 20</td><td></td><td class=label></td><td>STA</td><td>(BPTLO,X)</td><td class=comment>// Set BRK instruction...</td></tr>
<tr><td align=right>1071</td><td></td><td nowrap>FFDA &nbsp;CA</td><td></td><td class=label>BPS2:</td><td>DEX</td><td></td><td class=comment></td></tr>
<tr><td align=right>1072</td><td></td><td nowrap>FFDB &nbsp;CA</td><td></td><td class=label></td><td>DEX</td><td></td><td class=comment></td></tr>
<tr><td align=right>1073</td><td></td><td nowrap>FFDC &nbsp;10 F4</td><td></td><td class=label></td><td>BPL</td><td>BPS1</td><td class=comment>// Repeat until done</td></tr>
<tr><td align=right>1074</td><td></td><td nowrap>FFDE &nbsp;60</td><td></td><td class=label></td><td>RTS</td><td></td><td class=comment></td></tr>
<tr><td align=right>1075</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1076</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1077</td><td></td><td></td><td></td><td class=hashdirective>#if</td><td colspan=2 class=hashdirective>TANEX</td><td class=comment></td></tr>
<tr><td align=right>1078</td><td></td><td></td><td></td><td colspan=4 class=comment>//	Setup table in low ROM</td></tr>
<tr><td align=right>1079</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1080</td><td></td><td></td><td></td><td class=hashdirective>#else</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>1081</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1082</td><td></td><td></td><td></td><td colspan=4 class=comment>// SETUP TABLE</td></tr>
<tr><td align=right>1083</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>1084</td><td></td><td></td><td></td><td colspan=4 class=comment>// Copy in ROM of the initial settings for zero page variables</td></tr>
<tr><td align=right>1085</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1086</td><td></td><td nowrap>FFDF &nbsp;4C C3 FE</td><td></td><td class=label>SETUP:</td><td>JMP</td><td>KBINT</td><td class=comment></td></tr>
<tr><td align=right>1087</td><td></td><td nowrap>FFE2 &nbsp;4C 64 FF</td><td></td><td class=label></td><td>JMP</td><td>NMNT</td><td class=comment></td></tr>
<tr><td align=right>1088</td><td></td><td nowrap>FFE5 &nbsp;E0 03</td><td></td><td class=label></td><td>FDB</td><td>LINBOT</td><td class=comment>// ICURS setting</td></tr>
<tr><td align=right>1089</td><td></td><td nowrap>FFE7 &nbsp;01</td><td></td><td class=label></td><td>FCB</td><td>1</td><td class=comment>// RUNIND</td></tr>
<tr><td align=right>1090</td><td></td><td nowrap>FFE8 &nbsp;00</td><td></td><td class=label></td><td>FCB</td><td>0</td><td class=comment>// SINGLE</td></tr>
<tr><td align=right>1091</td><td></td><td nowrap>FFE9 &nbsp;00</td><td></td><td class=label></td><td>FCB</td><td>0</td><td class=comment>// PROCED</td></tr>
<tr><td align=right>1092</td><td></td><td nowrap>FFEA &nbsp;00</td><td></td><td class=label></td><td>FCB</td><td>0</td><td class=comment>// SIMCOM</td></tr>
<tr><td align=right>1093</td><td></td><td nowrap>FFEB &nbsp;40</td><td></td><td class=label></td><td>FCB</td><td>$40</td><td class=comment>// Slow Interrupt (RTI instruction)</td></tr>
<tr><td align=right>1094</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1095</td><td></td><td></td><td></td><td class=hashdirective>#endif</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>1096</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1097</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1098</td><td></td><td></td><td></td><td colspan=4 class=comment>// Header message</td></tr>
<tr><td align=right>1099</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1100</td><td></td><td nowrap>FFEC &nbsp;0D</td><td></td><td class=label>HDR:</td><td>FCB</td><td>13</td><td class=comment>// CR</td></tr>
<tr><td align=right>1101</td><td></td><td nowrap>FFED &nbsp;54 41 4E</td><td></td><td class=label></td><td>FCC</td><td>'TANBUG'</td><td class=comment></td></tr>
<tr><td align=right>1102</td><td></td><td nowrap>FFF3 &nbsp;0D 00</td><td></td><td class=label></td><td>FCB</td><td>13, 0</td><td class=comment>// CR, end of line terminator</td></tr>
<tr><td align=right>1103</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1104</td><td></td><td></td><td></td><td class=hashdirective>#if</td><td colspan=2 class=hashdirective>TANEX</td><td class=comment></td></tr>
<tr><td align=right>1105</td><td></td><td nowrap></td><td></td><td class=label></td><td>NOP</td><td></td><td class=comment></td></tr>
<tr><td align=right>1106</td><td></td><td nowrap></td><td></td><td class=label></td><td>NOP</td><td></td><td class=comment></td></tr>
<tr><td align=right>1107</td><td></td><td nowrap></td><td></td><td class=label></td><td>NOP</td><td></td><td class=comment></td></tr>
<tr><td align=right>1108</td><td></td><td></td><td></td><td class=hashdirective>#else</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>1109</td><td></td><td nowrap>FFF5 &nbsp;00 00</td><td></td><td class=label></td><td>FCB</td><td>0, 0</td><td class=comment>// Padding</td></tr>
<tr><td align=right>1110</td><td></td><td></td><td></td><td class=hashdirective>#endif</td><td colspan=2 class=hashdirective></td><td class=comment></td></tr>
<tr><td align=right>1111</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1112</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1113</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1114</td><td></td><td></td><td></td><td colspan=4 class=comment>// RESET / INTERRUPT VECTORS</td></tr>
<tr><td align=right>1115</td><td></td><td></td><td></td><td colspan=4 class=comment>//</td></tr>
<tr><td align=right>1116</td><td></td><td></td><td></td><td colspan=4 class=comment>// These vectors must appear at the top of the ROM space</td></tr>
<tr><td align=right>1117</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1118</td><td></td><td nowrap>FFF7 &nbsp;4C 89 FC</td><td></td><td class=label></td><td>JMP</td><td>RETERR</td><td class=comment>// $FFF7, also mapped to $F7F7</td></tr>
<tr><td align=right>1119</td><td></td><td nowrap>FFFA &nbsp;07 00</td><td></td><td class=label></td><td>FDB</td><td>NMIJP</td><td class=comment>// Non Maskable Interrupt vector</td></tr>
<tr><td align=right>1120</td><td></td><td nowrap>FFFC &nbsp;00 FC</td><td></td><td class=label></td><td>FDB</td><td>START</td><td class=comment>// Reset vector</td></tr>
<tr><td align=right>1121</td><td></td><td nowrap>FFFE &nbsp;04 00</td><td></td><td class=label></td><td>FDB</td><td>INTFS1</td><td class=comment>// Interrupt vector</td></tr>
<tr><td align=right>1122</td><td></td><td colspan=4></td></tr>
<tr><td align=right>1123</td><td></td><td nowrap></td><td></td><td class=label></td><td>END</td><td></td><td class=comment></td></tr>
<tr><td align=right>1124</td><td></td><td colspan=4></td></tr>
</table>

<p><span class=error>Assembly generated 0 errors</span>
<br><span class=warning>Assembly generated 0 warnings</span>
<p>DEBUG:
<br>Assembly processed in 62 ms
<br>Number of opcodes & directives is: 76
</body>
</html>
